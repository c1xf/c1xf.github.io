[{"content":"Written in Go, Hugo is an open source static site generator available under the Apache Licence 2.0. Hugo supports TOML, YAML and JSON data file types, Markdown and HTML content files and uses shortcodes to add rich content. Other notable features are taxonomies, multilingual mode, image processing, custom output formats, HTML/CSS/JS minification and support for Sass SCSS workflows.\nHugo makes use of a variety of open source projects including:\nhttps://github.com/russross/blackfriday https://github.com/alecthomas/chroma https://github.com/muesli/smartcrop https://github.com/spf13/cobra https://github.com/spf13/viper Hugo is ideal for blogs, corporate websites, creative portfolios, online magazines, single page applications or even a website with thousands of pages.\nHugo is for people who want to hand code their own website without worrying about setting up complicated runtimes, dependencies and databases.\nWebsites built with Hugo are extremelly fast, secure and can be deployed anywhere including, AWS, GitHub Pages, Heroku, Netlify and any other hosting provider.\nLearn more and contribute on GitHub.\n","description":"Hugo, the worldâ€™s fastest framework for building websites","id":0,"section":"","tags":null,"title":"About","uri":"https://sssylvan.github.io/about/"},{"content":"ä½¿ç”¨ Angular å¼€å‘é¡¹ç›®æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œè¿™æœŸé—´ç»å†äº†æˆ‘å¸å¤æ‚ä¸šåŠ¡æµç¨‹çš„æ¯’æ‰“ï¼Œå¥½åœ¨é€æ¸æŒæ¡ RxJS ä¹‹åï¼Œå¼€å§‹åº”å¯¹è‡ªå¦‚ ğŸ¤¹ã€‚ç°åœ¨å›è¿‡å¤´çœ‹ï¼Œå¿…é¡»å¾—å¤¸ä¸€å¥ï¼šå“åº”å¼ç¼–ç¨‹çœŸé¦™ã€‚\nç„¶è€Œæˆ‘åˆå­¦ RxJS çš„ä½“éªŒå¹¶ä¸å‹å¥½ï¼Œæ¦‚å¿µå¤ªå¤šäº†ã€‚ä¸€ä¸Šæ¥å°±æ˜¯æµï¼ˆstreamï¼‰ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€Pullã€Pushã€Hotã€Coldã€å•æ’­ã€å¤šæ’­\u0026hellip; ã€‚å¾—ï¼Œè¿˜æ²¡å¼€å§‹ç”¨ï¼Œå…ˆè¢«ä¸€å †åè¯ç»™ç»•æ™•äº†ã€‚\næˆ‘ä»¬å¯ä»¥å…ˆææ˜ç™½ä¸ºä»€ä¹ˆè¦â€œå“åº”å¼â€ï¼Ÿéå“åº”å¼æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿè¿™é‡Œæˆ‘æŠŠéå“åº”å¼ç¼–ç¨‹ç§°ä¸ºäº‹ä»¶å•ç‚¹ï¼ˆpointï¼‰å¤„ç†ã€‚\näº‹ä»¶å•ç‚¹å¤„ç† å•ç‚¹å¤„ç†æ€ç»´æ˜¯ä¸€ç§å¿«é€Ÿè€Œç®€å•çš„æ€è€ƒæ–¹å¼ã€‚åœ¨ç¼–å†™äº‹ä»¶å¤„ç†ä»£ç æ—¶ï¼Œå†™æ˜éœ€è¦æ‰§è¡Œçš„å…·ä½“æ­¥éª¤ï¼Œä»¥å®ç°æœ€ç»ˆçš„ç»“æœã€‚ä¸‹é¢ä»¥ TODO List ä¸ºæ¡ˆä¾‹ï¼Œé¡µé¢æœ‰ä¸€ä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¯ä»¥è¾“å…¥å…³é”®å­—è¿‡æ»¤ï¼Œè¿˜æœ‰ä¸€ä¸ªâ€œéšè—å·²å®Œæˆâ€çš„å¤é€‰æ¡†\nåœ¨ä»æœåŠ¡ç«¯è·å–åˆ°å¾…åŠåˆ—è¡¨ã€ç”¨æˆ·è¾“å…¥å…³é”®å­—å’Œç‚¹å‡»å¤é€‰æ¡†æ—¶ï¼Œé¡µé¢çš„åˆ—è¡¨é¡¹è¦æ˜¾ç¤ºç­›é€‰åçš„ç»“æœã€‚ä¸‹é¢æ˜¯æ ¸å¿ƒéƒ¨åˆ†çš„ä»£ç å®ç°ï¼ŒæœåŠ¡ç«¯è·å–ç”¨ Promise ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 @Component({ selector: \u0026#39;my-app\u0026#39;, standalone: true, imports: [CommonModule], template: ` \u0026lt;div class=\u0026#34;main\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;To Do List\u0026lt;/h1\u0026gt; \u0026lt;div\u0026gt; \u0026lt;input placeholder=\u0026#34;keyword\u0026#34; (input)=\u0026#34;handleKeywordChange($event)\u0026#34; /\u0026gt; \u0026lt;label\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; (input)=\u0026#34;handleHideCompleted($event)\u0026#34; /\u0026gt; hide completed \u0026lt;/label\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li *ngFor=\u0026#34;let item of items\u0026#34; [class.done]=\u0026#34;item.done\u0026#34;\u0026gt; {{ item.description }} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; `, styles: [\u0026#39;li.done { text-decoration: line-through;color:grey }\u0026#39;], }) export class PointDemo { keyword = \u0026#39;\u0026#39; completedHid = false items: Item[] = null allItems: Item[] = null ngOnInit() { // æ¨¡æ‹ŸæœåŠ¡ç«¯è·å– Promise.resolve([ { description: \u0026#39;eat\u0026#39;, done: true }, { description: \u0026#39;sleep\u0026#39;, done: false }, { description: \u0026#39;play\u0026#39;, done: false }, { description: \u0026#39;laugh\u0026#39;, done: true }, ]).then((res) =\u0026gt; { this.allItems = res this.filterItems() }) } handleKeywordChange(ev: any) { this.keyword = ev.target.value this.filterItems() } handleHideCompleted(ev: any) { this.completedHid = ev.target.checked this.filterItems() } private filterItems() { if (this.allItems) { this.items = this.allItems.filter( (item) =\u0026gt; item.description.includes(this.keyword) \u0026amp;\u0026amp; (this.completedHid ? !item.done : true) ) } } } é‡å¤å‡ºç°çš„ this.filterItems() è®©äººé—»åˆ°äº†ä¸å¥½çš„å‘³é“ã€‚æ¯ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œå˜æ›´ç›¸åº”çš„æ•°æ®ï¼Œç„¶åæŒ‰æ–°çš„æ•°æ®é‡æ–°ç­›é€‰å¾…åŠåˆ—è¡¨ã€‚æ•°æ®çš„æ¶ˆè´¹è¿‡ç¨‹ï¼Œåªèƒ½å†™åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ã€‚\nè¿™å°±å¥½æ¯”é¤å…çš„å¨å¸ˆç‚’å®Œä¸€é“èœï¼Œè¿˜è¦ä¸Šèœï¼Œæˆ–è€…æ‰“åŒ…æˆå¤–å–ï¼Œæˆ–è€…åšå…¶ä»–å¤„ç†ã€‚è¿™æ ·å¨å¸ˆçš„å‹åŠ›ä¼šå¾ˆå¤§ï¼Œä¸€æ—¦å¿™èµ·æ¥å¾ˆå®¹æ˜“å‡ºé”™ã€‚\nåŒæ ·çš„ï¼Œäº‹ä»¶å•ç‚¹å¤„ç†çš„æ–¹å¼ï¼Œè®©äº‹ä»¶å¤„ç†å‡½æ•°çš„å‹åŠ›ä¼šéšç€éœ€æ±‚å¢å¤šè€ŒåŠ å¤§ã€‚æ•°æ®çš„ç”Ÿäº§å’Œæ¶ˆè´¹è€¦åˆåœ¨äº†ä¸€èµ·ã€‚\nå“åº”å¼æ”¹é€  åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œé¤å…ä¼šé…å¤‡æœåŠ¡å‘˜ã€‚å¨å¸ˆç‚’å®Œèœï¼ŒæŠŠèœæ”¾ä¸Šé¤å°ï¼ŒæœåŠ¡å‘˜çœ‹åˆ°åä¼šå»ä¸Šèœæˆ–æ‰“åŒ…ï¼Œå®Œæˆåç»­çš„æ­¥éª¤ã€‚è¿™æ ·å¨å¸ˆçš„å‹åŠ›å¤§å‡ã€‚\nåœ¨ TODO List ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç»™å®ƒé…å¤‡â€œé¤å°â€å’Œâ€œæœåŠ¡å‘˜â€è¯•è¯•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 export class ObservableDemo { keyword$ = new BehaviorSubject(\u0026#39;\u0026#39;) completedHid$ = new BehaviorSubject(false) items: Item[] = null ngOnInit() { const allItems$ = from( Promise.resolve([ { description: \u0026#39;eat\u0026#39;, done: true }, { description: \u0026#39;sleep\u0026#39;, done: false }, { description: \u0026#39;play\u0026#39;, done: false }, { description: \u0026#39;laugh\u0026#39;, done: true }, ]) ) const waiter = ([allItems, keyword, completedHid]) =\u0026gt; { this.items = allItems.filter( (item) =\u0026gt; item.description.includes(keyword) \u0026amp;\u0026amp; (completedHid ? !item.done : true) ) } combineLatest([ allItems$, this.keyword$.asObservable(), this.completedHid$.asObservable(), ]).subscribe(waiter) } handleKeywordChange(ev: any) { this.keyword$.next(ev.target.value) } handleHideCompleted(ev: any) { this.completedHid$.next(ev.target.checked) } } ï¼ˆPSï¼šä»¥ $ ç»“å°¾æ˜¯å¯è§‚å¯Ÿå¯¹è±¡çš„å‘½åçº¦å®š1ï¼‰\næ”¹é€ åå¢åŠ äº†ä¸‰ä¸ªâ€œé¤å°â€ æ•°æ®æºï¼Œkeyword$ã€completedHid$ã€allItems$ï¼Œwaiter è®¢é˜…è¿™ä¸‰ä¸ªæºï¼Œåœ¨æ¥æ”¶åˆ°æ–°æ•°æ®æ—¶ï¼Œé‡æ–°è¿‡æ»¤å¾…åŠåˆ—è¡¨ã€‚åŒæ—¶åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œåªéœ€è¦å‘å‡ºæ–°çš„æ•°æ®ã€‚è¿™æ ·å„å¸å…¶èŒï¼Œå°±å®ç°äº†ç”Ÿäº§æ•°æ®å’Œæ¶ˆè´¹æ•°æ®çš„è§£è€¦ï¼Œä»£ç é€»è¾‘æ›´æ¸…æ™°æ˜“æ‡‚ã€‚\nAngular æä¾›äº†å“åº”å¼è¡¨å• FormControl å’Œ å¼‚æ­¥ Pipe asyncï¼Œä»£ç å¯ä»¥ç»§ç»­ç®€åŒ–ä¼ é€é—¨\nç°åœ¨å¯ä»¥å›ç­”æœ€å¼€å§‹çš„æå‡ºçš„ç–‘é—®ï¼Œå“åº”å¼ç¼–ç¨‹çš„å¥½å¤„æ˜¯ï¼šè§£è€¦ï¼Œå®ç°æ•°æ®ç”Ÿäº§å’Œæ¶ˆè´¹çš„èŒèƒ½åˆ†ç¦»ã€‚\nå‡çº§æµå¼æ€ç»´ å°åˆ°äº†ç”œå¤´ï¼Œå†æ¥çœ‹çœ‹å“åº”å¼ç¼–ç¨‹çš„å®šä¹‰ï¼šå“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„ç¼–ç¨‹èŒƒå¼ã€‚\næ•°æ®æµæ˜¯æŠŠåœ¨æ—¶é—´ä¸ŠæŒ‰é¡ºåºä¾æ¬¡äº§ç”Ÿæ•°æ®çœ‹ä½œä¸€ä¸ªæ•´ä½“ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯è§‚å¯Ÿçš„åºåˆ—ã€‚æ•°æ®æµçš„å˜åŒ–ä¼šè‡ªåŠ¨åœ°ä¼ æ’­ç»™ä¾èµ–äºå®ƒçš„ç»„ä»¶ï¼Œå¹¶è§¦å‘ç›¸åº”çš„æ›´æ–°å’Œååº”ã€‚\nYour Mouse is a Databaseï¼ŒRxJS çš„ä½œè€… Erik Meijer å¦‚æ˜¯å†™åˆ°ã€‚\nå®¢æˆ·ç«¯çš„èŒèƒ½æ˜¯è¯·æ±‚æœåŠ¡å™¨æ•°æ®å’Œå“åº”ç”¨æˆ·æ“ä½œï¼Œé€šå¸¸å“åº”ç»“æœ = æœåŠ¡å™¨æ•°æ® + ç”¨æˆ·æ“ä½œæ•°æ®ã€‚ä½†ä»–ä»¬éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸”ä¸€ä¸ªæ˜¯ XMLHttpRequestï¼Œä¸€ä¸ªæ˜¯ Dom Eventï¼Œä¸¤è€…å¹¶ä¸èƒ½ç®€å•çš„ç›¸åŠ ã€‚ç”¨ RxJS æŠŠå®ƒä»¬åŒåŒ–ä¸ºâ€œæµâ€ï¼Œå°±å¾ˆå¥½å¤„ç†äº†ã€‚\næ¯”å¦‚åœ¨ä¹‹å‰ TODO List æ”¹é€ æ¡ˆä¾‹ä¸­ï¼Œå°±æ˜¯æŠŠâ€œåˆ—è¡¨çš„è·å–â€ã€ â€œå…³é”®å­—çš„è¾“å…¥â€ã€â€œå¤é€‰æ¡†çš„ç‚¹å‡»â€ å½“æˆ â€œè¯·æ±‚æµâ€ã€â€œè¾“å…¥æµâ€å’Œâ€œç‚¹å‡»æµâ€ï¼Œå†é€šè¿‡ RxJS æä¾›åˆå¹¶æ“ä½œç¬¦ combineLatest ï¼ŒæŠŠåˆ†æ•£çš„æ•°æ®æµåˆå¹¶åˆ°ä¸€èµ·æ¥ä½¿ç”¨ï¼Œå¾—åˆ°æœ€ç»ˆçš„å“åº”ç»“æœï¼Œéå¸¸ä¾¿åˆ©ã€‚\nRxJS æä¾›äº† 90 å¤šç§ æ“ä½œç¬¦ï¼Œå¯ä»¥å¯¹æµè¿›è¡Œåˆ›å»ºã€åˆå¹¶ã€æ‹†åˆ†ã€è½¬åŒ–ç­‰å„ç§æ“ä½œã€‚â€œæµâ€ä¸ä»£è¡¨ä¸€å®šå¾—æœ‰å¤šä¸ªæ•°æ®ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯ EMPTYã€‚æŠŠå¼‚æ­¥äº‹ä»¶éƒ½å½“æˆæµï¼Œæ‰èƒ½å‘æŒ¥æ“ä½œç¬¦çš„å¨åŠ›ã€‚\nPromise ç»å¸¸è¢«æ‹¿æ¥å’Œå¯è§‚å¯Ÿåºåˆ—ï¼ˆObservableï¼‰å¯¹æ¯”ï¼Œå®ƒä»¬éƒ½å¯ä»¥å¤„ç†å¼‚æ­¥äº‹ä»¶ã€‚ä½† Promise åœ¨åˆ›å»ºæ—¶ç«‹å³æ‰§è¡Œï¼Œä¸”æœ€å¤šåªèƒ½æä¾›ä¸€ä¸ªå€¼ï¼›è€Œ Observable æ˜¯æƒ°æ€§çš„ï¼Œæœ‰è®¢é˜…æ‰ä¼šæ‰§è¡Œï¼Œå¯ä»¥æä¾›å¤šä¸ªå€¼ã€‚è¯¦è§ Observables compared to promisesã€‚\næœ€å å…³äºå“åº”å¼ç¼–ç¨‹ï¼Œä¸è¦çº ç»“äºå®ƒæå‡ºçš„å„ç§æ¦‚å¿µï¼Œç”¨å®ƒè§£å†³é—®é¢˜ï¼Œä¼˜åŒ–ä»£ç ï¼Œæå‡æ€ç»´ã€‚å½“ä½ è¶³å¤Ÿç†Ÿç»ƒä¹‹åï¼Œé‚£äº›æ¦‚å¿µè‡ªç„¶è€Œç„¶å°±ç†è§£äº†ã€‚æœ¬æ–‡ä¸¾äº†ä¸€ä¸ªå¾ˆç®€å•çš„æ¡ˆä¾‹ï¼Œå®é™…å¼€å‘ä¸­ RxJS èƒ½è®©ä½ è½»æ¾åº”å¯¹å„ç§å¤æ‚åœºæ™¯ã€‚\nObservable å·²ç»åœ¨ TC39 ææ¡ˆé‡Œäº†ï¼Œè™½ç„¶ç°åœ¨è¿˜æ˜¯ Stage 1 å¾æ±‚æ„è§é˜¶æ®µ2ã€‚\nhttps://angular.io/guide/rx-library#naming-conventions-for-observables\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://tc39.es/proposal-observable/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":1,"section":"posts","tags":null,"title":"Angular RxJS å“åº”å¼ç¼–ç¨‹","uri":"https://sssylvan.github.io/posts/angular-rxjs-%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/"},{"content":" æœ€è¿‘é‡å†™äº†é¡¹ç›®çš„æ”¯ä»˜ä¸­å¿ƒç»„ä»¶ã€‚èµ·å› æ˜¯é¡¹ç›®ç»è¿‡å‡ ä¸ªæœˆçš„å¼€å‘å’Œè¿­ä»£ï¼Œä»å¼€å§‹çš„ä¸€ç§ä¸šåŠ¡è®¢å• + ä¸€ç§æ”¯ä»˜æ–¹å¼ï¼Œåˆ°ç°åœ¨å˜æˆäº†å¤šç§ä¸šåŠ¡è®¢å• + å¤šç§æ”¯ä»˜æ–¹å¼ ï¼Œå¤æ‚åº¦ç¿»äº†å‡ å€ï¼ŒåŸæœ‰çš„ç»„ä»¶å˜å¾—éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•ã€‚åˆšå¥½å¼€å‘çš„æ–°ä¸šåŠ¡åˆ°äº†å¯¹æ¥æ”¯ä»˜é˜¶æ®µï¼Œç´¢æ€§æŠŠå®ƒé‡å†™äº†ã€‚è¿™æ¬¡å¯¹å¤æ‚ä¸šåŠ¡çš„é‡å†™è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº† Angular ä¾èµ–æ³¨å…¥çš„å¼ºå¤§å’Œçµæ´» ã€‚\nä¸šåŠ¡åœºæ™¯ ç”¨æˆ·åœ¨æˆ‘å¸ç½‘ç«™ä¸Šè´­ä¹°æœºç¥¨æˆ–è€…é¢„è®¢é…’åº—ï¼Œä¸‹å•å®Œæˆåä¼šè¿›åˆ°æ”¯ä»˜é¡µé¢ã€‚æ”¯ä»˜é¡µé¢æ ¹æ®ç”¨æˆ·ä¿¡æ¯è·å–å…¶å¯ç”¨çš„æ”¯ä»˜æ–¹å¼ï¼Œç„¶åç”¨æˆ·å°±å¯ä»¥æŒ‰éœ€é€‰æ‹©æ”¯ä»˜æ–¹å¼å®Œæˆæ”¯ä»˜ã€‚é¡µé¢ç»“æ„å¤§ä½“å¦‚å›¾ï¼š\nè®¢å•é¡µåŒ…å«äº§å“ä¿¡æ¯å’Œæ”¯ä»˜ä¸­å¿ƒç»„ä»¶ï¼Œæ”¯ä»˜ä¸­å¿ƒåŒ…å«å¤šä¸ªæ”¯ä»˜ç»„ä»¶ï¼Œå¯ä»¥åˆ‡æ¢æ”¯ä»˜æ–¹å¼ï¼Œæ”¯ä»˜ç»„ä»¶åŒ…å«æ”¯ä»˜æŒ‰é’®ã€‚æ”¯ä»˜ç»„ä»¶ä¹‹é—´æ²¡æœ‰å…³è”ã€‚å½“ç”¨æˆ·ç‚¹ä¸‹æ”¯ä»˜æŒ‰é’®æ—¶ï¼Œå¤§è‡´ä¼šç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\nè™šçº¿éƒ¨åˆ†è¡¨ç¤ºä¸åŒäº§å“/ä¸åŒæ”¯ä»˜æ–¹å¼ç›¸åº”çš„æµç¨‹ä¼šæœ‰å·®å¼‚ï¼Œ ğŸ˜‚ åŸºæœ¬å°±æ²¡å•¥ç›¸åŒçš„ã€‚å¤æ‚ç¨‹åº¦ = äº§å“ç±»å‹*æ”¯ä»˜æ–¹å¼\nå®ç°æ–¹æ¡ˆ æ—§ç‰ˆçš„å®ç°æ–¹æ¡ˆç®€å•ç›´æ¥ï¼ŒæŠŠæ”¯ä»˜æ‰€éœ€çš„è®¢å•ä¿¡æ¯å±‚å±‚ä¼ é€’åˆ°æ¯ä¸ªæ”¯ä»˜ç»„ä»¶ã€‚è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜æœ‰ä¸¤ä¸ªï¼š\nçˆ¶ç»„ä»¶ä¾èµ–å­ç»„ä»¶çš„å…·ä½“å®ç°ã€‚æ”¯ä»˜ç»„ä»¶æœ‰å˜æ›´ï¼Œè®¢å•ç»„ä»¶è¦è·Ÿç€æ”¹ã€‚ å±æ€§å±‚å±‚ä¼ é€’çš„å†™æ³•å•°å—¦ ä¾èµ–åè½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼ŒDIPï¼‰æä¾›äº†ä¼˜åŒ–æ€è·¯ï¼š\né«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¬¡çš„æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚ æŠ½è±¡æ¥å£ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ã€‚è€Œå…·ä½“å®ç°åˆ™åº”è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚ ä¾èµ–æŠ½è±¡ç¤ºæ„å›¾ï¼š\nå—¯ï¼Œçœ‹ä¼¼å¥½åƒæ²¡å•¥é—®é¢˜ã€‚ç­‰ç­‰ï¼å…‰ä¾èµ–æŠ½è±¡äº†ï¼Œåè½¬å‘¢ï¼Ÿæ²¡çœ‹åˆ°å“ªé‡Œæœ‰â€œåâ€å•Šã€‚è¿™é‡Œæˆ‘åªèƒ½æ„Ÿè°¢ä¸­æ–‡ç¤¾åŒºçš„ç¿»è¯‘ ğŸ˜¤ã€‚ã€‚æ¥çœ‹ wikipedia è‹±æ–‡åŸç‰ˆå¯¹ DIP çš„è§£é‡Šï¼ˆæœºç¿»ï¼‰ï¼š\nA. é«˜çº§æ¨¡å—ä¸åº”ä»ä½çº§æ¨¡å—å¯¼å…¥ä»»ä½•å†…å®¹ã€‚ä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼ˆä¾‹å¦‚ï¼Œæ¥å£ï¼‰ã€‚\nB. æŠ½è±¡ä¸åº”ä¾èµ–äºç»†èŠ‚ã€‚ç»†èŠ‚ï¼ˆå…·ä½“å®ç°ï¼‰åº”è¯¥å–å†³äºæŠ½è±¡ã€‚\nä¸åº”ä»ä½çº§æ¨¡å—å¯¼å…¥ä»»ä½•å†…å®¹ï¼ ä¸Šå›¾ä¸­çš„æ”¯ä»˜æŠ½è±¡å®šä¹‰åœ¨äº†æ”¯ä»˜æ¨¡å—ï¼Œè®¢å•æ¨¡å—éœ€è¦ä»æ”¯ä»˜æ¨¡å—å¯¼å…¥ã€‚æ˜æ˜¾ä¸ç¬¦åˆè§„åˆ™ï¼è°ƒæ•´ä¸€ä¸‹ç¤ºæ„å›¾ï¼š\nè¿™æ ·ä¾èµ–æŠ½è±¡å’Œåè½¬å°±å¾ˆæ˜æ˜¾çš„èƒ½çœ‹å‡ºæ¥äº† ğŸ™ƒã€‚\nåè½¬ æ˜¯è¿™ä¸€åŸåˆ™çš„ç²¾é«“æ‰€åœ¨ï¼Œè®¢å•æ¨¡å—å’Œæ”¯ä»˜æ¨¡å—ä¾èµ–å…³ç³»å¯¹è°ƒäº†ã€‚ä»ä½çº§æ¨¡å—æœ‰ä»€ä¹ˆï¼Œé«˜é˜¶æ¨¡å—å°±åªèƒ½ç”¨ä»€ä¹ˆï¼Œåè½¬ä¸ºç”±é«˜é˜¶æ¨¡å—æä¾›ä¿¡æ¯ï¼Œä½çº§æ¨¡å—è°ƒç”¨ã€‚\nè¿™å°±å¥½æ¯”é£Ÿå ‚å’Œä¸‹é¦†å­çš„åŒºåˆ«ã€‚å»é£Ÿå ‚åƒé¥­ï¼Œé£Ÿå ‚å½“å¤©ç‚’äº†ä»€ä¹ˆèœä½ å°±åªèƒ½åƒä»€ä¹ˆã€‚ä¸‹é¦†å­åˆ™ä¸åŒï¼Œæƒ³åƒå•¥å…ˆä¸‹å•ï¼ˆæä¾›èœå“ä¿¡æ¯ï¼‰ï¼Œå¨æˆ¿æ‹¿åˆ°è®¢å•ç›´æ¥ç»™ä½ åšã€‚æ˜¾ç„¶ä¸‹é¦†å­åƒçš„æ›´èˆ’æœï¼Œæ›´èƒ½é€‚åº”å˜åŒ–ã€‚\nå…·ä½“å®ç° å›åˆ°è®¢å•æ”¯ä»˜æµç¨‹ï¼Œç°åœ¨çœ‹äº§å“è®¢å•éœ€è¦æä¾›å“ªäº›ä¿¡æ¯ã€‚\nè®¢å•é‡‘é¢ã€è®¢å•å· éªŒè¯è®¢å•æµ å®Œæˆè®¢å•çš„å›è°ƒ æŠ½è±¡ç±»ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // pending-order.ts import { Observable } from \u0026#39;rxjs\u0026#39; export abstract class PendingOrder { /** æ”¯ä»˜é‡‘é¢ */ abstract get payAmount(): number /** è®¢å•å· */ abstract get orderNo(): string /**æ”¯ä»˜å‰éªŒè¯*/ abstract beforePay(): Observable\u0026lt;void\u0026gt; /** æ”¯ä»˜å®Œæˆ */ abstract payCompleted(): void } è®¢å•å®ç°å–å†³äºæŠ½è±¡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 // flight-order.component.ts import { Component, forwardRef, OnInit } from \u0026#39;@angular/core\u0026#39; import { of } from \u0026#39;rxjs\u0026#39; import { tap } from \u0026#39;rxjs/operators\u0026#39; import { PendingOrder } from \u0026#39;../common/pending-order\u0026#39; @Component({ selector: \u0026#39;app-flight-order\u0026#39;, templateUrl: \u0026#39;./flight-order.component.html\u0026#39;, styleUrls: [\u0026#39;./flight-order.component.css\u0026#39;], providers: [ { provide: PendingOrder, useExisting: forwardRef(() =\u0026gt; FlightOrderComponent), }, ], }) export class FlightOrderComponent extends PendingOrder implements OnInit { constructor() { super() } ngOnInit() {} payCompleted() { console.log(\u0026#39;flight order pay completed\u0026#39;) } beforePay() { return of(null).pipe(tap(() =\u0026gt; console.log(\u0026#39;flight order before pay\u0026#39;))) } get payAmount() { return 9999 } get orderNo() { return \u0026#39;flight order no:fffffffffffffffffffffff\u0026#39; } } æ”¯ä»˜æ¨¡å—ä¾èµ–äºè®¢å•æ¨¡å—çš„æŠ½è±¡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 import { Component, OnInit } from \u0026#39;@angular/core\u0026#39; import { PendingOrder } from \u0026#39;../../common/pending-order\u0026#39; @Component({ selector: \u0026#39;app-balance-pay\u0026#39;, templateUrl: \u0026#39;./balance-pay.component.html\u0026#39;, styleUrls: [\u0026#39;./balance-pay.component.css\u0026#39;], }) export class BalancePayComponent implements OnInit { constructor(public order: PendingOrder) {} ngOnInit() {} handlePay() { console.log(\u0026#39;balance pay\u0026#39;) this.order .beforePay() .pipe() .subscribe((_) =\u0026gt; { this.order.payCompleted() }) } } æ¼”ç¤º demoï¼šhttps://stackblitz.com/edit/angular-f7cuehï¼Œåˆ‡æ¢è®¢å•/æ”¯ä»˜æŒ‰é’®ï¼Œç‚¹å‡»â€œæ”¯ä»˜â€æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º\næ€»ç»“ æ’¸å®Œæ”¯ä»˜ç»„ä»¶ï¼Œæ„Ÿè§‰ä¾èµ–åè½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰åº”ç”¨èµ·æ¥çœŸæ˜¯å¤ªå¦™äº†ã€‚è®¢å•é¡µå’Œæ”¯ä»˜ç»„ä»¶è§£è€¦äº†ä¸è¯´ï¼Œè®¢å•é¡µè¿˜æ‹¥æœ‰äº†ä¸»åŠ¨æƒï¼Œæ‰©å±•æ€§å—·å—·çš„ã€‚äº§å“éœ€æ±‚å°½ç®¡åŠ å°½ç®¡å˜ï¼Œå°çˆ·è½»æ¾ç»™ä½ å®ç° ğŸ˜\n","description":"","id":2,"section":"posts","tags":null,"title":"Angular ä¾èµ–æ³¨å…¥é‡å†™æ”¯ä»˜ç»„ä»¶","uri":"https://sssylvan.github.io/posts/angular-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E9%87%8D%E5%86%99%E6%94%AF%E4%BB%98%E7%BB%84%E4%BB%B6/"},{"content":"æˆ‘ä» 14 å¹´å¼€å§‹ä»äº‹å‰ç«¯å¼€å‘ï¼Œåˆšå¥½èµ¶ä¸Šäº† MVVM çš„æ—¶ä»£æµªæ½®ã€‚ä» AvalonJS ğŸ™ å¼€å§‹ï¼Œå…ˆåä½¿ç”¨äº† 3 å¹´å¤š Vue2ï¼Œ3 å¹´å¤š Angularï¼Œæ–­æ–­ç»­ç»­æœ‰åŠå¹´çš„ Reactã€‚ç›®å‰ Angularã€React ä»æ˜¯ä¸»åŠ›ï¼Œæ­£åœ¨å°†å…¬å¸çš„å‰å°ä¸šåŠ¡ä» Angular è¿ç§»åˆ° Reactï¼Œåå°ä¸šåŠ¡ç»§ç»­ä½¿ç”¨ Angularã€‚è¿™æ¬¡è¿ç§»åŠ ä¸Šä»¥å¾€çš„å¼€å‘ç»éªŒï¼Œè®©æˆ‘æ¸…æ™°æ„Ÿå—åˆ°äº†ä¸‰å¤§æ¡†æ¶çš„å·®å¼‚ã€‚(React æ˜¯ Library ç§°ä¸º Framework ä¸å¤ªåˆé€‚ï¼Œä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œæš‚ä¸”ç»Ÿç§°ä¸ºæ¡†æ¶ ï¼‰\nAngular Anuglar æ˜¯è®©æˆ‘å—ç›Šæœ€å¤šçš„æ¡†æ¶ï¼Œæ˜¯å®ƒå¸¦æˆ‘å…¥é—¨ TypeScriptï¼Œç´§æ¥ç€å°±è¢«å®ƒå®Œç¾çš„ Form æŠ½è±¡æ‰€æƒŠè‰³ï¼Œè€Œåè¢«å®ƒåŸºäº RxJS æ‰“é€ çš„â€œæµ·çº³ç™¾å·â€åˆ·æ–°è®¤çŸ¥ï¼Œæœ€åè¢«ä¾èµ–æ³¨å…¥çš„ä¼˜é›…æ‰€æŠ˜æœã€‚\nä½œä¸ºå½“æ—¶åˆšä» Vue è½¬åˆ° Angular çš„æˆ‘æ¥è®²ï¼Œèµ·åˆæœ‰è¢«å®ƒçš„å„ç§é™åˆ¶å¼„å¾—ä¸çˆ½ã€‚æ…¢æ…¢å‘ç°å®ƒå¯ä»¥å¾ˆå¥½çš„è§£å†³äº†æˆ‘åœ¨ä¹‹å‰é¡¹ç›®ä¸Šç¢°åˆ°çš„å¤´ç–¼åœºæ™¯ã€‚\næ¯”å¦‚ï¼Œæˆ‘å®ç°è¿‡ä¸€ä¸ªå¤æ‚çš„è¡¨å•éœ€æ±‚ï¼Œäº§å“çš„æŠ˜æ‰£åŠ›åº¦è¦æŒ‰åŒºé—´è®¾ç½®ï¼ŒåŒºé—´å¯ä»¥ä»»æ„å¢åˆ æ”¹ï¼Œç›¸è¿çš„åŒºé—´ä¸èƒ½æœ‰äº¤é›†ã€‚å¤æ‚ç‚¹åœ¨äºåŠ¨æ€çš„éªŒè¯å…³ç³»ã€‚è™½ç„¶å¯ä»¥é€šè¿‡æ”¾å¼ƒä¸€äº›ç”¨æˆ·ä½“éªŒï¼Œæ¥é™ä½å¤æ‚åº¦ï¼Œä½†åœ¨æ‹å‡ºéªŒè¯æµç¨‹åï¼Œè¿˜æ˜¯ç”¨ Angular Form æ¯”è¾ƒè½»æ¾çš„å®ç°äº†ï¼Œæ²¡æœ‰ç‰ºç‰²ç”¨æˆ·ä½“éªŒã€‚\nåˆæ¯”å¦‚æˆ‘å¸çš„æŸä¸ªäº§å“è®¢å•ï¼Œæäº¤è®¢å•è¿™ä¸€æµç¨‹ä¸Šï¼Œæœ‰è¶…å¤šçš„åˆ¤æ–­èŠ‚ç‚¹ã€‚ç”¨æˆ·å±æ€§ï¼Œè´­ä¹°è®°å½•ï¼Œæ˜¯å¦è¿‡æœŸç­‰ç­‰ä¸€è¿ä¸²çš„æµç¨‹ã€‚ä¸åŒç”¨æˆ·æœ‰äº›æµç¨‹éœ€è¦è·³è¿‡ï¼Œæœ‰äº›åˆæ˜¯ä¸­é—´æœ‰å·®å¼‚çš„ä¸¤å¥—åˆ¤æ–­ï¼Œé‡Œé¢ä¹Ÿæ˜¯æå…¶å¤æ‚ã€‚æˆ‘çš„ä½œæ³•æ˜¯æŠŠèŠ‚ç‚¹æ‹†åˆ†æ¸…æ¥šï¼Œæ¯ä¸ªèŠ‚ç‚¹åªè´Ÿè´£ä¸€ç§ä¸šåŠ¡åœºæ™¯ï¼Œæœ€åç”¨ RxJS çš„æµæŠŠè¿™äº›èŠ‚ç‚¹ä¸²è”èµ·æ¥ã€‚æµç¨‹å˜å¾—æ¸…æ™°ç›´è§‚ã€‚\nå…³äºä¾èµ–æ³¨å…¥ï¼Œä¹‹å‰æœ‰å†™è¿‡ä¸€ç¯‡å…³äºç”¨å®ƒå®ç°æ”¯ä»˜ä¸­å¿ƒçš„åšå®¢ï¼Œè¿™é‡Œå°±ä¸å†å•°å—¦äº†ï¼Œæ€»ä¹‹ä¸¤ä¸ªå­—ï¼šä¼˜é›… ğŸ¸ã€‚\nä½†æ˜¯æŸäº›åœºæ™¯ä¸‹ï¼ŒAugular ä¹Ÿç»å¸¸ä¼šè®©æˆ‘é™·å…¥çº ç»“ï¼šè¿™éƒ¨åˆ†ç›¸åŒçš„ä»£ç è¯¥å¦‚ä½•å®ç°å¤ç”¨å‘¢ï¼ŒComponentã€Serviceã€Decorator è¿˜æ˜¯ Abstract Classï¼Ÿæ¯”å¦‚æˆ‘å¸çš„è®¢å•ä¸‹å•é¡µé¢ã€‚æœ‰å¤šç§ç”¨æˆ·è§’è‰²ï¼šå…¬åŠ¡å‘˜ã€ä¼ä¸šç”¨æˆ·ã€ä¸ªäººç”¨æˆ·ã€‚ä»–ä»¬æœ‰éƒ¨åˆ†åŠŸèƒ½é€šç”¨ï¼Œéƒ¨åˆ†åŠŸèƒ½ä¸ªæ€§åŒ–ï¼Œæœ‰æ—¶å€™éƒ¨åˆ†é€šç”¨åŠŸèƒ½è¿˜è¦æ”¹æˆä¸ªæ€§åŒ– ğŸ˜­ã€‚éœ€æ±‚ä¸€å˜æˆ‘çš„æŠ½è±¡ç«‹é©¬å˜æˆè¶…å‰è®¾è®¡ï¼Œæœ€åæŠŠå¤ç”¨è¿™ä»¶äº‹çœ‹å¾—è¶Šæ¥è¶Šæ…é‡ã€‚ã€‚æ€æ ·ä½œå‡ºèƒ½é€‚åº”ä¸šåŠ¡å˜åŒ–ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼ˆOpenâ€“closed principleï¼‰çš„æŠ½è±¡ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œè¿˜æ˜¯åŠŸåŠ›ä¸å¤Ÿå§~\næ­¤å¤–ï¼Œå› ä¸º Angular å¹²äº†å¤ªå¤šéåŸç”Ÿçš„æ´»ï¼Œç”Ÿäº§æ¨¡å¼æ‰“å‡ºçš„åŒ…ä¼šæ¯” Vueã€React å¤§å¾ˆå¤šã€‚\nVue2 Vue2 ç»™æˆ‘çš„æ„Ÿå—ç®€å•ã€å¿«ã€‚å®ƒå’Œ Angular ä¸€æ ·å¼€ç®±å³ç”¨ï¼Œä¸”é’ˆå¯¹é—®é¢˜ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯æœ€ç®€å•ç›´æ¥çš„ã€‚æ¯”å¦‚ç»„ä»¶è·¨å±‚çº§çš„é€šè®¯ï¼Œåªéœ€è¦åœ¨ç»„ä»¶ä¸Šæ·»åŠ  provide/inject æå®šã€‚ä¸éœ€è¦æ‰¯å‡º Service ã€Context è¿™äº›æ¦‚å¿µã€‚å®ƒæ˜¯å¯ä»¥è®©æˆ‘å¿«é€Ÿå‡ºæ´»çš„æ¡†æ¶ï¼Œè€Œä¸”æ‹¥æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚æˆ‘åªåœ¨æ—©æœŸå†™è¿‡ä¸€ç¯‡å…³äº Vue æºç çš„åšå®¢ï¼ˆå¤ªä¹…è¿œäº†åŠ ä¸Šç‰µæ‰¯çš„ç»†èŠ‚å¤ªå¤šï¼Œæ²¡æ•´ç†åˆ°è¿™ä¸ªç«™ç‚¹ï¼‰ï¼Œå› ä¸ºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå®ƒçš„å®˜ç½‘ç»™å®‰æ’å¾—æ˜æ˜ç™½ç™½ã€‚ä¸¤ä¸ªå­—å·´é€‚ï¼šğŸï¸ã€‚\næˆ‘å¯¹ Vue2 ä½¿ç”¨è¿˜åœç•™åœ¨å‡ å¹´å‰ï¼Œè¿™é‡Œä¸ä¾¿è¿‡å¤šè¯„è®ºã€‚ä¸è¿‡ template åœ¨æ‰“åŒ…æ—¶ä¸€ç›´æ²¡æœ‰ç±»å‹æ£€æŸ¥ï¼Œè¿™è®©æˆ‘æœ‰ç‚¹ä¸å¤ªæ”¾å¿ƒçš„ä½¿ç”¨å®ƒã€‚\nå¦‚æœæ˜¯ Vue2 + Typescript å¼€å‘çš„è¯ï¼Œæ¨èä½¿ç”¨ Vue Class Component ã€‚Vue3 çš„ api è®¾è®¡æœ‰ç‚¹æ€ªæ€ªçš„ï¼Œæœ‰ç‚¹ä¸å¥½æ¥å—ï¼Œä¸€ç›´æ²¡å»å°è¯•~\nReact React æœ‰ç€æœ€çº¯ç²¹çš„å“²å­¦ï¼šUI = Fn(State)ã€‚è¢«å®ƒå¸å¼•çš„åŸå› ï¼Œæ˜¯ Hooks å¯ä»¥è®©ä¸šåŠ¡å†…èšæ›´å®¹æ˜“å¤ç”¨ï¼Œè§£å†³ä½¿ç”¨ Angular æ—¶æŠ½è±¡ä¸šåŠ¡çš„çº ç»“ã€‚å½“ç„¶ä¹Ÿæ˜¯å› ä¸º React å®åœ¨å¤ªç« ğŸ”¥ äº†ï¼Œåè§‚ Angular åœ¨å›½å†…å·²ç»é€æ¸åŠ¿å¾®ã€‚åˆæ¬¡å°è¯•åï¼Œæ„Ÿå—åˆ°äº† JSX è¯­æ³•ä¸‹ Function Component è¡Œäº‘æµæ°´èˆ¬çš„èˆ’é€‚å¼€å‘ä½“éªŒã€‚ä½†é©¬ä¸Šåˆæ„Ÿå—åˆ°çº¯ç²¹ != ç®€å•ï¼Œä¾èµ–é—­åŒ…å®ç°çš„ Hooks è®©æˆ‘æ—©æœŸè¸©äº†ä¸å°‘å‘ï¼Œç”šè‡³ä¸€åº¦æ€€ç–‘è¿™ç®—å“ªé—¨å­çº¯å‡½æ•°ï¼Œåæ¥äº†è§£åˆ°å®ƒæ˜¯å—åˆ°å‡½æ•°å¼ç¼–ç¨‹ä»£æ•°æ•ˆåº”çš„å¯å‘ï¼Œä¾¿ä¹Ÿå¿µå¤´é€šè¾¾äº† ğŸ¤¯ã€‚\nç´§æ¥ç€ React åˆæŠ›ç»™äº†æˆ‘æ€§èƒ½é—®é¢˜ã€‚ç”±äº JSX åªæ˜¯ createElement çš„è¯­æ³•ç³–ï¼ŒReact æ²¡æ³•åƒ Angular ã€Vue å¯¹é™æ€æ¨¡æ¿åšä¼˜åŒ–ï¼Œè·³è¿‡é™æ€æ¨¡æ¿çš„æ£€æŸ¥ã€‚åŒæ—¶ React çš„æœ€å°æ›´æ–°å•ä½æ˜¯ç»„ä»¶ï¼Œä¹Ÿåšä¸åˆ° Vue çš„åŸå­çº§æ›´æ–°ã€‚React è‡ªèº«åšä¸äº†ï¼Œé‚£è°æ¥åšå‘¢ï¼Ÿå¼€å‘è€…å•Š ğŸ˜©ã€‚å¼€å‘è€…åœ¨ç¼–ç æ—¶ï¼Œè¦è€ƒè™‘æŠŠçŠ¶æ€å½±å“çš„èŒƒå›´å°½å¯èƒ½ç¼©å°ï¼Œé¿å…çŠ¶æ€å˜æ›´è§¦å‘æ˜‚è´µçš„æ›´æ–°ã€‚ï¼ˆå½“ç„¶ React ä¹Ÿæäº† Fiber åšæ›´æ–°ä¼˜åŒ–ï¼Œå‰å®³æ˜¯éå¸¸å‰å®³ï¼Œä½†ä¹Ÿæœ‰ç‚¹æ“¦å±è‚¡çš„å«Œç–‘ï¼‰ã€‚å¥½åœ¨è¿™æ ·ä¹Ÿä¸å®Œå…¨æ˜¯é—®é¢˜ï¼Œç›¸åæ˜¯å¯¹å¼€å‘è€…ä¸€ç§æŒºå¥½çš„çº¦æŸ ğŸ˜ï¼Œé¿å…äº†çŠ¶æ€å¤§ä¹±ç‚–ã€‚\næ€§èƒ½é—®é¢˜ä¹Ÿå¯¼è‡´ç¤¾åŒºå¾ˆå¤šè¡¨å•è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºéå—æ§ç»„ä»¶ï¼Œå°½ç®¡å®˜æ–¹æ¨èçš„æ˜¯å—æ§ç»„ä»¶ã€‚éå—æ§ç»„ä»¶ä¹ˆå¾— React çš„çµé­‚ã€‚æˆ‘ä»ç„¶ä¼šé€‰æ‹©ä½¿ç”¨å—æ§ç»„ä»¶ï¼Œæ— éæ˜¯å¤šå†™ä¸€ç‚¹æ¨¡æ¿ä»£ç ï¼Œä¸€ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç»„ä»¶ã€‚\nNo Silver Bullet ä¸‰å¤§æ¡†æ¶æ‰€å±•ç¤ºçš„ç‰¹è´¨ï¼Œåˆä¸€æ¬¡è¯´æ˜äº†æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰å¹³è¡¡ä¸å–èˆã€‚æ²¡æœ‰ä¸€ä¸ªæ¡†æ¶å¯ä»¥å®Œç¾é€šæ€æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ï¼Œåªæœ‰é’ˆå¯¹ä¸šåŠ¡ç‰¹ç‚¹ï¼Œæ‰¾åˆ°å¼€å‘æˆæœ¬å’Œç»´æŠ¤æ€§ã€æ‰©å±•æ€§çš„å¹³è¡¡ç‚¹ï¼Œç»§è€Œæ‰¾åˆ°åˆé€‚çš„æ¡†æ¶ã€‚æ–—èƒ†ç®€å•æ€»ç»“ä¸‹ï¼šVue é€‚åˆä¸šåŠ¡ä¸éœ€è¦ç»å¸¸è¿­ä»£çš„é¡¹ç›®ï¼Œåˆå¿«åˆçœå¿ƒï¼›Angular é€‚åˆæœ‰è¾ƒå¤šå¤æ‚è¡¨å•çš„åœºæ™¯ï¼›React åˆ™é€‚åˆæ¨¡å—è¦ç»„åˆå¤šç§åŠŸèƒ½çš„ä¸šåŠ¡ã€‚\nä»¥ä¸Šæ˜¯æˆ‘å¯¹ Angularã€Vueã€React çš„ä¸€ç‚¹æµ…è–„è®¤çŸ¥ã€‚æ¬¢è¿è¯„è®ºç•™è¨€äº¤æµ ğŸ¥³ã€‚\n","description":"","id":3,"section":"posts","tags":null,"title":"Angularã€Vue2ã€React å®æˆ˜æ€»ç»“","uri":"https://sssylvan.github.io/posts/angularvue2react-%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/"},{"content":" HTTP ç¼“å­˜æ˜¯ä¼˜åŒ–ç½‘ç»œæ€§èƒ½çš„ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å‡å°‘èµ„æºåŠ è½½æ—¶é—´å¹¶é™ä½æµé‡æ¶ˆè€—ã€‚å®ƒä¹Ÿæ˜¯æ–°æ‰‹å¤§æ¦‚ç‡ä¼šè¸©çš„ä¸€ä¸ªå‘ï¼Œå› ä¸ºæˆ‘å°±æ˜¯è¿™ä¹ˆè¿‡æ¥çš„ ğŸ˜‚ã€‚åˆ†æåŸå› æœ‰ 2 ç‚¹ï¼š\nHTTP æœ‰é»˜è®¤çš„ç¼“å­˜ç­–ç•¥ã€‚åœ¨æ²¡æœ‰ç»™å‡º Cache-Control æ—¶ï¼Œç»™ä½ æ•´ä¸ªå¯å‘å¼ç¼“å­˜ï¼Œå®Œå…¨ä¸å¯æ§ã€‚ å¹¿ä¸ºæµä¼ çš„ HTML \u0026lt;meta http-equiv=\u0026quot;Cache-Control\u0026quot;/\u0026gt; è®¾ç½®çš„ç¼“å­˜ç­–ç•¥ä¸å¯é 1ï¼Œå¾—åœ¨ Web æœåŠ¡å™¨ä¸Šé…ç½®å“åº”æ¶ˆæ¯å¤´ å¦‚æœå‰ç«¯å’Œè¿ç»´éƒ½æ²¡å…³æ³¨ç¼“å­˜çš„è®¾ç½®ï¼Œé‚£é¡¹ç›®ä¸Šçº¿ååŸºæœ¬å°±è¦é­é‡äº† ğŸ’€ã€‚è€³è¾¹ä¼šå“èµ·è®¡ç®—æœºé¢†åŸŸçš„åè¨€è­¦å¥ï¼š\nThere are only two hard problems in Computer Science: cache invalidation, and naming things.ï¼ˆè®¡ç®—æœºç§‘å­¦åªæœ‰ä¸¤å¤§éš¾é¢˜ï¼Œâ€œè®©ç¼“å­˜å¤±æ•ˆâ€å’Œâ€œå‘½åâ€ï¼‰\næ°å·§ï¼ŒHTTP ç¼“å­˜ä¸¤ä¸ªå…¨å äº†ï¼Œå®ƒçš„éƒ¨åˆ†å‘½åä¹Ÿä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ ğŸ˜\nHTTP ç¼“å­˜åŸºæœ¬åŸç† åœ¨æµè§ˆå™¨è¯·æ±‚èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šå“åº”ä¸€ä¸ª HTTP æŠ¥æ–‡ã€‚æŠ¥æ–‡ä¸­å«æœ‰å“åº”å¤´ï¼ˆresponse headerï¼‰ï¼Œé€šè¿‡è®¾ç½®å“åº”å¤´ä¸­çš„ç¼“å­˜æ§åˆ¶ä¿¡æ¯ï¼Œå¯ä»¥æŒ‡ç¤ºæµè§ˆå™¨æ˜¯å¦ç¼“å­˜è¯¥èµ„æºå¹¶å‘Šè¯‰æµè§ˆå™¨ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚\næœ‰æ•ˆæœŸå†…ï¼ˆfreshï¼‰å†æ¬¡è¯·æ±‚è¯¥èµ„æºå°†ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­è¯»å–ï¼Œä¸å†è¯·æ±‚æœåŠ¡å™¨ï¼ˆä¸­æ–‡ç¤¾åŒºç§°ä¹‹ä¸ºå¼ºç¼“å­˜ï¼‰ã€‚ æœªè®¾ç½®æœ‰æ•ˆæœŸæˆ–æœ‰æ•ˆæœŸè¿‡åï¼ˆstaleï¼‰ï¼Œå†æ¬¡è¯·æ±‚èµ„æºï¼Œä¼šæºå¸¦æœ¬åœ°ç¼“å­˜çš„æ–‡ä»¶ä¿¡æ¯ï¼Œè¯¢é—®æœåŠ¡å™¨èµ„æºæ˜¯å¦å·²ç»æ›´æ–°ã€‚å¦‚æœä¿¡æ¯ä¸€è‡´ï¼ŒæœåŠ¡å™¨è¿”å› 304ï¼Œç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œå¦åˆ™æœåŠ¡å™¨è¿”å›æœ€æ–°çš„å†…å®¹ï¼ˆä¸­æ–‡ç¤¾åŒºç§°ä¹‹ä¸ºåå•†ç¼“å­˜ï¼‰ã€‚ HTTP ç¼“å­˜å°±åƒä¸€ä¸ªéœ¸æ€» ğŸ‘¨â€ğŸ’¼ï¼Œå–œæ¬¢ç”¨â€œå¼ºâ€çš„ï¼Œä¸è¡Œå†â€œåå•†â€ï¼Œè¿˜ä¸è¡Œæ‰æ”¾å¼ƒã€‚\nHTTP ç¼“å­˜æ¶ˆæ¯å¤´ Cache-Controlï¼šé€šç”¨æ¶ˆæ¯å¤´å­—æ®µï¼Œå‡ºç°äº HTTP / 1.1ã€‚å¯ä»¥é€šè¿‡å®ƒåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æŒ‡å®šå®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ã€‚\nç¼“å­˜æ–¹å¼ï¼š\nmax-age=\u0026lt;seconds\u0026gt; ï¼š ç¼“å­˜å­˜å‚¨çš„å‘¨æœŸï¼ˆå•ä½ç§’ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ç¼“å­˜è¢«è®¤ä¸ºè¿‡æœŸ no-cacheï¼šå¯ä»¥ç¼“å­˜ï¼Œä½†ä½¿ç”¨å‰è¦å‘æœåŠ¡å™¨éªŒè¯ã€‚ no-storeï¼šä¸å¯ä»¥ç¼“å­˜ ç¼“å­˜è¿‡æœŸåï¼š\nmust-revalidateï¼šè¿‡æœŸåå¿…é¡»å‘æœåŠ¡å™¨éªŒè¯åå†ä½¿ç”¨ max-age=0, must-revalidate æ•ˆæœå’Œ no-cache å·®ä¸å¤šã€‚\nä»£ç†æœåŠ¡å™¨ç¼“å­˜è®¾ç½®ï¼š\nCache-control: public // ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜ Cache-control: private // ä»£ç†æœåŠ¡å™¨ä¸å¯ä»¥ç¼“å­˜ Cache-control: proxy-revalidate // ä¸ must-revalidate ä½œç”¨ç›¸åŒ Cache-control: s-maxage=\u0026lt;seconds\u0026gt; // ä¸ max-age ä½œç”¨ç›¸åŒ Cache-control: no-transform // ä»£ç†æœåŠ¡å™¨ä¸å¾—å¯¹èµ„æºè¿›è¡Œè½¬æ¢æˆ–è½¬å˜ å…¶ä»–ç¼“å­˜å“åº”å¤´å­—æ®µï¼š\nExpires ç”¨æ¥æŒ‡å®šå…·ä½“è¿‡æœŸæ—¶é—´ã€‚ä½†å®ƒå’Œ Cache-Control: max-age å­˜åœ¨é‡å çš„åœ°æ–¹ï¼Œä¸” max-age ä¼˜å…ˆçº§æ›´é«˜ Pragma HTTP/1.0 ç‰ˆæœ¬çš„é€šç”¨æ¶ˆæ¯å¤´å­—æ®µï¼Œé€šå¸¸è€ƒè™‘å…¼å®¹æ€§è®¾ç½® Pragma: no-cache ï¼Œæ•ˆæœå’Œ Cache-Control: no-cache ä¸€è‡´ ç¼“å­˜å¯ä»¥è®¾ç½®çš„å€¼æ¯”è¾ƒå¤šï¼Œç½‘ä¸Šå¾ˆå¤šèµ„æ–™ä¹Ÿæ˜¯å¤§ä¹±ç‚–ï¼Œå¾ˆå®¹æ˜“è®©äººæ„Ÿåˆ°å›°æƒ‘ ğŸ˜µã€‚å…¶å®å¸¸ç”¨åˆ°çš„å°± 3 ä¸ª max-ageã€must-revalidateã€no-cache\nHTTP ç¼“å­˜éªŒè¯ è¯·æ±‚å“åº”å¤´é‡Œæä¾› Last-Modifiedã€Etag ä½œä¸ºèµ„æºçš„æ—¶æ•ˆä¿¡æ¯ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨éªŒè¯æ—¶ä¼šæºå¸¦è¯¥ä¿¡æ¯ï¼Œä¸¤ä¸ªçš„å·®åˆ«å¦‚ä¸‹ï¼š\nLast-Modified/If-Modified-Since æ¯”å¯¹æ–‡ä»¶çš„æœ€åå˜æ›´æ—¶é—´ï¼Œç²¾ç¡®åˆ°ç§’ Etag/If-None-Match ä¸ºèµ„æºè®¡ç®—å‡ºçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚æ¯”å˜æ›´æ—¶é—´å¯é ï¼Œä½†æœ‰è®¡ç®—æˆæœ¬ åˆ¶å®š HTTP ç¼“å­˜ç­–ç•¥ ç¼“å­˜çš„åŸåˆ™å…¶å®å¾ˆç®€å•ï¼š\nä¼šå˜æ›´çš„èµ„æºæ¯æ¬¡ä½¿ç”¨ç¼“å­˜å‰å‘æœåŠ¡å™¨éªŒè¯ï¼šno-cache ä¸ä¼šå˜æ›´çš„èµ„æºç¼“å­˜æ—¶é—´å°½å¯èƒ½é•¿ï¼šmax-age=31536000ï¼ˆä¸€å¹´ï¼‰ æ¯”å¦‚ SPA é¡¹ç›®çš„ index.html æ–‡ä»¶åº”è¯¥ä½¿ç”¨ no-cacheï¼š\n# nginx add_header Cache-Control \u0026#34;no-cache\u0026#34;; å…¶ä»–èµ„æºæ–‡ä»¶åç”± content-hash ç”Ÿæˆçš„ï¼Œä¸ä¼šå˜æ›´ä½¿ç”¨ max-ageï¼š\n# nginx expires 365d; ä¸æ˜¯ç”± content-hash ç”Ÿæˆæ–‡ä»¶åçš„èµ„æºåˆ™é…Œæƒ…é…ç½®ã€‚\næµè§ˆå™¨åˆ·æ–°è¡Œä¸º ä¸Šè¿°çš„ç¼“å­˜æ˜¯åŸºäºç”¨æˆ· å†æ¬¡æ‰“å¼€ç½‘é¡µ çš„è¡Œä¸ºï¼Œå½“ç”¨æˆ· åˆ·æ–°ç½‘é¡µ æ—¶ï¼Œç¼“å­˜çš„ä½¿ç”¨æƒ…å†µæœ‰æ‰€ä¸åŒ\nF5/Ctrl+R/ç‚¹å‡»åˆ·æ–°æŒ‰é’® HTMLï¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚å¤´å¢åŠ  Cache-Control: max-age=0ã€If-Modified-Sinceã€If-None-Matchï¼Œ éªŒè¯ç¼“å­˜æ˜¯å¦å¯ç”¨ å…¶ä»–èµ„æºæ–‡ä»¶ jsã€cssã€img ä»ç„¶ä½¿ç”¨ç¼“å­˜ (from memory cache) or (from disk cache) Ctrl+F5/Ctrl+Shift+R å¼ºåˆ¶åˆ·æ–° æ‰€æœ‰èµ„æºå¿½ç•¥ç¼“å­˜ï¼Œè¯·æ±‚å¤´å¢åŠ  Cache-Control: no-cacheï¼Œèµ„æºé‡æ–°ä»æœåŠ¡å™¨è·å– æµè§ˆå™¨çš„æ™®é€šåˆ·æ–°åªä¼šé‡æ–°éªŒè¯ç½‘é¡µç¼“å­˜ï¼Œç½‘é¡µå†…å¼•å…¥çš„èµ„æºä¸ä¼šéªŒè¯ã€‚\nå°ç»“ HTTP æ—¨åœ¨å°½å¯èƒ½å¤šåœ°ç¼“å­˜ï¼Œé¢å¯¹ç¼“å­˜è¿™é“éš¾é¢˜ï¼Œåœ¨é¡¹ç›®ä¸Šçº¿å‰ç¼“å­˜ç­–ç•¥æ˜¯å¿…é¡»è€ƒè™‘å’Œé…ç½®å¥½çš„ï¼š\nä¸€æ¬¡æ€§èµ„æºï¼Œè®¾ç½®å°½å¯èƒ½å¤§çš„ max-age ä¼šå˜æ›´èµ„æºï¼Œè®¾ç½® no-cache èƒ½ç¡®å®šæ—¶æ•ˆï¼Œè®¾ç½® Expiresã€must-revalidateï¼Œæ³¨æ„ä¸ max-age çš„å†²çª æ­¤å¤–ï¼Œåœ¨é…ç½® Web æœåŠ¡å™¨æ¶ˆæ¯å¤´æ—¶ï¼Œè¿˜æœ‰ ğŸ›¡ï¸ å®‰å…¨ç›¸å…³ çš„è®¾ç½®éœ€è¦æ³¨æ„ï¼š https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP\nå‚è€ƒèµ„æ–™ https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching https://stackoverflow.com/questions/1341089/is-there-a-meta-tag-to-turn-off-caching-in-all-browsers\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":4,"section":"posts","tags":null,"title":"HTTP ç¼“å­˜å®è·µæ€»ç»“","uri":"https://sssylvan.github.io/posts/http-%E7%BC%93%E5%AD%98%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/"},{"content":" Hugo ä¸–ç•Œä¸Šæœ€å¿«çš„å»ºç«™æ¡†æ¶\nç°åœ¨å·¥å…·å¾ˆå¤šï¼Œè¦æ­å»ºä¸ªäººåšå®¢å¹¶ééš¾äº‹ã€‚ä¹Ÿå› ä¸ºå¤šï¼Œæ—¶é—´å¯èƒ½æµªè´¹åœ¨äº†é€‰æ‹©ä¸Šï¼Œæœ¬æ–‡ä¸»è¦è®°å½•æ­å»ºè¿‡ç¨‹ä¸­æˆ‘çš„ä¸€äº›é€‰æ‹©ï¼Œä¾›è¯»è€…çš„å‚è€ƒ\nHugo çš„å®‰è£…ä¸ä½¿ç”¨ Windows å®‰è£…æ–¹å¼æœ‰å‡ ç§ã€‚ è¿™é‡Œæˆ‘çš„é€‰æ‹©çš„æ˜¯ ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ + é…ç½®ç¯å¢ƒå˜é‡ã€‚æ³¨æ„æœ€å¥½é€‰æ‹©å¸¦ extened çš„ç‰ˆæœ¬ã€‚æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬ï¼šhugo_extended_0.102.3_Windows-64bit.zip\né…ç½®ç¯å¢ƒå˜é‡æ—¶æ³¨æ„æ˜¯ç¼–è¾‘ Path å˜é‡ï¼Œå¢åŠ è§£å‹å hugo.exe æ‰€åœ¨çš„ç›®å½•ã€‚é…ç½®å¥½ä¹‹åï¼ŒæŸ¥çœ‹æ˜¯å¦æ­£ç¡®å®‰è£…\n1 2 $ hugo version hugo v0.102.3-b76146b129d7caa52417f8e914fc5b9271bf56fc+extended windows/amd64 BuildDate=2022-09-01T10:16:19Z VendorInfo=gohugoio å®‰è£…å¥½ä¹‹åï¼Œä½¿ç”¨ hugo help æŸ¥çœ‹æ‰€æœ‰çš„å‘½ä»¤ã€‚ä¸€èˆ¬å¸¸ç”¨çš„åªæœ‰ä¸‰ä¸ªï¼š\nåˆå§‹åŒ–ï¼šhugo new site my-blog æœ¬åœ°é¢„è§ˆï¼šhugo server æ‰“åŒ…ï¼šhugo hugo new site my-blog åˆå§‹åŒ–ä¹‹åå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 Congratulations! Your new Hugo site is created in C:\\git\\hugo_blog\\my-blog. â€‹ Just a few more steps and you\u0026#39;re ready to go: â€‹ 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026#34;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026#34; command. 2. Perhaps you want to add some content. You can add single files with \u0026#34;hugo new \u0026lt;SECTIONNAME\u0026gt;\\\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026#34;. 3. Start the built-in live server via \u0026#34;hugo server\u0026#34;. â€‹ Visit https://gohugo.io/ for quickstart guide and full documentation. æ­¤æ—¶æ‰§è¡Œ hugo server çœ‹åˆ°çš„æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚å°†å¿ƒæ€¡çš„ä¸»é¢˜ä¸‹è½½åˆ° themes ç›®å½•ä¸‹ï¼Œå¹¶å°† exampleSite çš„å†…å®¹æ›¿æ¢åˆ°æ ¹ç›®å½•ã€‚å†æ¬¡è¿è¡Œ hugo serverï¼Œæ­¤æ—¶å¯èƒ½æ”¶è·æŠ¥é”™\n1 2 3 4 5 6 7 Start building sites â€¦ hugo v0.86.1-F6821B88 windows/amd64 BuildDate=2021-07-30T10:13:35Z VendorInfo=gohugoio ERROR 2021/08/08 15:05:14 Failed to get JSON resource \u0026#34;https://api.twitter.com/1/statuses/oembed.json?id=1085870671291310081\u0026amp;omit_script=true\u0026#34;: Get \u0026#34;https://api.twitter.com/1/statuses/oembed.json?id=1085870671291310081\u0026amp;omit_script=true\u0026#34;: dial tcp 162.125.2.6:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. If you feel that this should not be logged as an ERROR, you can ignore it by adding this to your site config: ignoreErrors = [\u0026#34;error-remote-getjson\u0026#34;] Error: Error building site: \u0026#34;C:\\git\\hugo_blog\\my-block\\content\\blog\\rich-content.md:1:1\u0026#34;: timed out initializing value. You may have a circular loop in a shortcode, or your site may have resources that take longer to build than the `timeout` limit in your Hugo config file. Built in 37375 ms rich-content.md æ–‡ä»¶å†…é€šå¸¸ä¼šæœ‰ youtube æˆ–è€… twitter çš„å†…å®¹ï¼Œç§»é™¤å®ƒä»¬ã€‚å†æ¬¡è¿è¡Œ hugo server å°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹äº†ã€‚åç»­æŒ‰ä¸»é¢˜çš„æ–‡æ¡£è¿›è¡Œé…ç½®å³å¯ã€‚\næ­å»ºç›®æ ‡ å¥½çœ‹ï¼Œè®©äººæœ‰æŒç»­è¾“å‡ºçš„åŠ¨åŠ› å®‰å…¨ï¼Œå†…å®¹ä¸ä¼šä¸¢å¤± æ–¹ä¾¿ï¼Œä¸“æ³¨å†…å®¹åˆ›ä½œ æ²Ÿé€šï¼Œè¯»è€…å¯ä»¥ç•™è¨€æ–¹ä¾¿æ²Ÿé€š å¥½çœ‹å¹¶ä¸åªæ˜¯ç¾è§‚ï¼Œåƒæˆ‘çš„å†…å®¹ä»¥æ–‡å­—å’Œä»£ç ä¸ºä¸»ï¼Œæƒ³è¦è‰¯å¥½çš„é˜…è¯»ä½“éªŒï¼Œå†…å®¹å°±ä¸èƒ½è¿‡å®½ã€‚æ­¤å¤–æˆ‘å¸Œæœ›å¯¼èˆªçš„ç»“æ„æ¸…æ™°æ–¹ä¾¿ç¿»é˜…ï¼Œæœ‰å°‘é‡çš„ä¸ªäººå…ƒç´ ä½†ä¸å½±å“é˜…è¯»ï¼Œæœ‰æœç´¢åŠŸèƒ½ç­‰ã€‚Hugo æä¾›äº†ä¸€äº›ä¸»é¢˜ https://themes.gohugo.io/\nå®‰å…¨èµ·è§ï¼Œæˆ‘é€‰æ‹©æŠŠå†…å®¹æ‰˜ç®¡åœ¨æœ€å¤§çš„åŒæ€§äº¤å‹ç¤¾åŒº Githubï¼ŒåŒæ—¶åˆ©ç”¨ Github Actions å®ç°æ¨é€è‡ªåŠ¨å‘å¸ƒã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ https://github.com/peaceiris/actions-gh-pages\nè¯„è®ºç•™è¨€ä½¿ç”¨ https://utteranc.es/ã€‚gitment é…ç½®éº»çƒ¦ï¼Œè¿˜ç”¨ä¸äº† Error: Bad credentialsï¼Œå¯èƒ½æ˜¯å§¿åŠ¿å“ªé‡Œä¸å¯¹\næ€»ç»“ hugo ç‰ˆæœ¬ï¼šhugo_extended_0.102.3_Windows-64bit.zip ä½¿ç”¨ exampleSite æ—¶æ³¨æ„å¤–é“¾ è‡ªåŠ¨å‘å¸ƒ github actionsï¼š https://github.com/peaceiris/actions-gh-pages è¯„è®ºç•™è¨€ï¼š https://utteranc.es/ å‚è€ƒåœ°å€ ä½¿ç”¨ hugo ç”Ÿæˆé™æ€åšå®¢å¹¶éƒ¨ç½²åœ¨ GitHub ä¸Šï¼šhttps://zhuanlan.zhihu.com/p/397612900 ","description":"","id":5,"section":"posts","tags":null,"title":"Hugo + Github Pages æ­å»ºä¸ªäººåšå®¢","uri":"https://sssylvan.github.io/posts/hugo-+-github-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"},{"content":"åˆå­¦ React Hooks æ—¶ï¼Œå¶ç„¶åœ¨ä¸­æ–‡ç¤¾åŒºåˆ·åˆ°ä¸€ç¯‡æ–‡ç« è®² â€œ React Hooks çš„é—­åŒ…é™·é˜±â€ ï¼Œå“‡é å±…ç„¶æœ‰å‘ï¼Œèµ¶ç´§çœ‹ ã€‚çœ‹å®Œè‡ªå·±ä¹Ÿè¯•äº†ä¸€ä¸‹ï¼Œè¿è¡Œç»“æœç¡®å®åç›´è§‰ã€‚\næ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ï¼Œé¢‘ç¹åœ¨ React ç›¸å…³çš„æ–‡ç« é‡Œçœ‹åˆ° â€œé—­åŒ…é™·é˜±â€ è¿™ä¸ªè¯ã€‚åœ¨èŠå¤©å’Œå†™åšå®¢æ—¶ï¼Œæˆ‘ä¹Ÿè·Ÿç€ç”¨äº†èµ·æ¥ã€‚ç‰¹åˆ«åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæ€»æƒ³ç€ä¸è¦è¸©åˆ°â€œé™·é˜±â€é‡Œï¼Œè¿˜ç»™æˆ‘é€ æˆäº†ä¸å°çš„å¿ƒæ™ºå‹åŠ›ã€‚æœ€è¿‘å‡†å¤‡æ•´ç† React çš„æœ€ä½³å®è·µï¼Œåœ¨æ€è€ƒ â€œé—­åŒ…é™·é˜±â€ æ—¶ï¼Œæˆ‘å‘ç°è¿™åè¯å–å¾—å°±æ˜¯ä¸ªå‘ï¼\nå®ƒè®²å¾—çš„æ˜¯ï¼ŒuseEffect ä¸­çš„å‰¯ä½œç”¨å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡æ—¶ï¼Œå†…éƒ¨è°ƒç”¨çš„ state æ°¸è¿œæ˜¯åˆå§‹å€¼ã€‚è¿™æ˜¯ç”±äº Hooks çš„å®ç°ä¾èµ–é—­åŒ…å¯¼è‡´çš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 export default function App() { const [count, setCount] = useState(0) useEffect(function () { const timer = setInterval(function log() { console.log(`Count is: ${count}`) }, 2000) return () =\u0026gt; clearInterval(timer) }, []) return ( \u0026lt;div className=\u0026#34;App\u0026#34;\u0026gt; {count} \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increase\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ) } setCount ä¸ä¼šæ›´æ–° useEffect é‡Œé¢ countã€‚ç‚¹å‡»increase æŒ‰é’®ï¼Œé¡µé¢æ˜¾ç¤ºçš„ {count} ä¼šå¢åŠ ï¼Œè€Œæ§åˆ¶å°æ¯éš” 2 ç§’è¾“å‡ºçš„è¿˜æ˜¯ Count is: 0 ã€‚\nå¯¹äºç†Ÿæ‚‰é—­åŒ…çš„å¼€å‘è€…æ¥è®²ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªéš¾ç†è§£çš„é—®é¢˜ã€‚ä½†â€œé™·é˜±â€ç»™æˆ‘çš„å°è±¡æ˜¯ï¼ŒHooks æŒ–äº†å‘ï¼Œåªè¦ä¸æ³¨æ„æˆ‘å°±ä¼šæ‰å‘é‡Œã€‚è¿™è®©æˆ‘åœ¨ä½¿ç”¨æ—¶æœ‰ç§å¦‚å±¥è–„å†°çš„æ„Ÿè§‰ã€‚ç›´åˆ°æˆ‘åœ¨å¤–ç½‘æŸ¥æ‰¾ç›¸å…³èµ„æ–™æ—¶ï¼Œæ‰è±ç„¶å¼€æœ—ã€‚è€å¤–æ›´å¤šçš„ç®¡è¿™å« Stale Closuresï¼Œè¿‡æœŸçš„é—­åŒ…ã€‚çœ‹ä¸‹å›¾å°½ç®¡æˆ‘çš„å…³é”®è¯é‡Œæœ‰ trapï¼Œä½†æœç´¢ç»“æœç”¨åˆ°è¿™ä¸ªè¯çš„ä¸å¤šã€‚\nè€Œæœç´¢ stale closure å°±æœ‰å¾ˆå¤šçš„ç›¸å…³ç»“æœã€‚\nè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠè°ƒç”¨çš„ count æ·»åŠ åˆ° useEffect ä¾èµ–æ•°ç»„é‡Œé¢ã€‚ å‹æ ¹å°±æ²¡æœ‰ä»€ä¹ˆâ€œé™·é˜±â€ï¼Œä¸­æ–‡ç¤¾åŒºé‡Œæœ‰äº›æ–‡ç« ç›´æ¥è¢«å¸¦åï¼Œæ‰¯åˆ°è¦ç”¨ useRef å»äº†ã€‚ã€‚\næ­£ç¡®çš„è¯´æ³•åº”è¯¥æ˜¯ï¼šuseEffect æœªæ­£ç¡®æ·»åŠ ä¾èµ–é¡¹ï¼Œå¯¼è‡´ä¸€ç›´ä½¿ç”¨è¿‡æœŸçš„é—­åŒ…ã€‚æƒ³è¦é¿å…ï¼Œåœ¨ä½¿ç”¨ useEffect æ—¶è¦æ³¨æ„ä¾èµ–é¡¹ã€‚å½“ç„¶è¦åœ¨å‰¯ä½œç”¨å‡½æ•°é‡Œé¢æ‰¾ä¾èµ–é¡¹çš„å¼€å‘ä½“éªŒç¡®å®å¾ˆå·®ï¼Œå¥½åœ¨æœ‰ eslint-plugin-react-hooks ï¼Œå¯ä»¥ç›´æ¥é…ç½® \u0026quot;react-hooks/exhaustive-deps\u0026quot;\nè¿™ä¸ªåè¯æœ€å¤§çš„é—®é¢˜åœ¨äºï¼ŒæŠŠé”…ç”©ç»™ Hooksï¼Œæå‡äº† Hooks ä½¿ç”¨çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚Hooks æœ‰å®ƒçš„è§„åˆ™ï¼Œå¼€å‘è€…éµå¾ªè¿™äº›è§„åˆ™ï¼Œæ‰èƒ½å¾ˆå¥½çš„äº«ç”¨å®ƒã€‚\næƒ³èµ·äº†ä»¥å‰ Javascript ä¸€é“ç»å…¸é¢è¯•é¢˜ï¼š\n1 2 3 4 5 for (var i = 1; i \u0026lt; 5; i++) { setTimeout( function () { console.log(i); }); } è¾“å‡ºç»“æœå…¨æ˜¯ 5ã€‚åŒæ ·çš„åç›´è§‰ï¼Œä½†é²œæœ‰ â€œsetTimeout é™·é˜±â€ï¼Œâ€œä¸è¦ä½¿ç”¨ setTimeoutâ€ çš„è¯´æ³•ã€‚\n","description":"","id":6,"section":"posts","tags":null,"title":"React Hooks æ²¡æœ‰é—­åŒ…é™·é˜±","uri":"https://sssylvan.github.io/posts/react-hooks-%E6%B2%A1%E6%9C%89%E9%97%AD%E5%8C%85%E9%99%B7%E9%98%B1/"},{"content":" æœ€è¿‘çœ‹åˆ°äº†ä¸¤ä½å¤§ä½¬å¤©èŠ±æ¿çº§åˆ«çš„ç±»å‹ä½“æ“ï¼š\nç”¨ TypeScript ç±»å‹è¿ç®—å®ç°ä¸€ä¸ªä¸­å›½è±¡æ£‹ç¨‹åº - å¾é£ TypeScript ç±»å‹ä½“æ“å¤©èŠ±æ¿ï¼Œç”¨ç±»å‹è¿ç®—å†™ä¸€ä¸ª Lisp è§£é‡Šå™¨ - brambles çœ‹å®Œåªèƒ½çŒ®ä¸Šæˆ‘çš„ ğŸ§â€â™‚ï¸ã€‚ç½‘ä¸Šä¹Ÿå‡ºç°ä¸€äº› type-challenges ä¸Šçš„é¢è¯•éªšé¢˜ï¼Œå¤§éƒ¨åˆ†æ˜¯è€ƒå¯Ÿ infer çš„åº”ç”¨ã€‚\nå®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä¹Ÿæœ‰ä½¿ç”¨ inferã€‚å…·ä½“åœºæ™¯æ˜¯ç”¨åœ¨æŠ½è±¡ä¸åŒä¸šåŠ¡çš„ç›¸åŒæµç¨‹ï¼Œ æ¨æ–­å…·ä½“ä¸šåŠ¡ç±»å‹ã€‚infer çš„å¼ºå¤§åœ¨äºå¯ä»¥é€šè¿‡æ¨¡å¼åŒ¹é…å¯ä»¥ä»æ³›å‹ä¸­æå–åˆ°ç±»å‹ï¼Œæ€»ç»“æœ‰ 4 ç§åœºæ™¯ï¼š\nå¯¹è±¡å±æ€§ç±»å‹ å‡½æ•°å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ Function Parameters and Return type æ•°ç»„ Array æ¨¡æ¿å­—ç¬¦ä¸² Template Literals ä½¿ç”¨å‰æ³¨æ„ï¼šinfer åªèƒ½å‡ºç° extends æ¡ä»¶ç±»å‹1 è¯­å¥ä¸­ï¼Œä¸”ç±»å‹å˜é‡åªèƒ½åœ¨ true åˆ†æ”¯ä¸­ä½¿ç”¨ã€‚\næ¡ä»¶ç±»å‹è¯­æ³•æœ‰ç‚¹åƒ JavaScript çš„ä¸‰å…ƒè¿ç®— (condition ? trueExpression : falseExpression) ï¼š\n1 SomeType extends OtherType ? TrueType : FalseType; å¯¹è±¡å±æ€§ condition çš„å†™æ³•æ˜¯å±æ€§ä½œä¸º keyï¼Œå€¼ä½¿ç”¨ infer ï¼š{ prop : infer V }ã€‚ä¸‹é¢ä»£ç ä»é€šç”¨çš„æ¥å£ç±»å‹ä¸­è·å– todo æ•°æ®ç±»å‹\n1 2 3 4 5 6 7 8 9 10 11 12 interface ApiResponse\u0026lt;T\u0026gt; { code: number data: T } interface Todo { content: string completed: boolean } type TodosResp = ApiResponse\u0026lt;Todo[]\u0026gt; type GetRespData\u0026lt;T\u0026gt; = T extends { data: infer V } ? V : never type DataInTodoResp = GetRespData\u0026lt;TodosResp\u0026gt; // Todo[] å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ å†™å‡ºå‡½æ•°ç±»å‹å£°æ˜ (...args: any[]) =\u0026gt; any ç„¶åå¡«ç©ºå³å¯\nè¿”å›å€¼ç±»å‹\n1 type MyReturnType\u0026lt;T\u0026gt; = T extends (...args: any[]) =\u0026gt; infer R ? R : never å‚æ•°ç±»å‹\n1 2 3 4 5 type MyParameters\u0026lt;T extends (...args: any[]) =\u0026gt; any\u0026gt; = T extends ( ...any: infer P ) =\u0026gt; any ? P : never æ•°ç»„ ä¸€ç±»ä»ç„¶æ˜¯æ¨¡å¼åŒ¹é…ï¼Œé€šè¿‡è§£æ„èµ‹å€¼2ï¼Œå–æ•°ç»„ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªçš„ç±»å‹\n1 2 type First\u0026lt;T extends any[]\u0026gt; = T extends [infer F, ...any[]] ? F : never type Last\u0026lt;T extends any[]\u0026gt; = T extends [...any[], infer L] ? L : never ä¸€ç±»è¦ä½¿ç”¨é€’å½’ï¼Œåœ¨ç±»å‹ç³»ç»Ÿä¸­å®ç° JavaScript Array.includes å‡½æ•°ï¼Œè§£æ„å–åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å’Œç”±å‰©ä½™å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸè¿”å› trueï¼ŒæœªåŒ¹é…æˆåŠŸç»§ç»­ç”¨å‰©ä¸‹çš„æ•°ç»„åŒ¹é…ã€‚\ntype Includes\u0026lt;T extends readonly any[], U\u0026gt; = T extends [infer F,...infer R] ? (Equal\u0026lt;F,U\u0026gt; extends true ? true : Includes\u0026lt;R,U\u0026gt;) : false æ¨¡æ¿å­—ç¬¦ä¸² åˆ é™¤ä¸¤æ®µçš„ç©ºç™½å­—ç¬¦ä¸² Trimï¼Œè§£æ³•æ˜¯æ¨¡æ¿æ¨¡å¼é…åˆé€’å½’\n1 2 3 4 5 6 type Chars = \u0026#39; \u0026#39; | \u0026#39;\\n\u0026#39; | \u0026#39;\\t\u0026#39; type Trim\u0026lt;S extends string\u0026gt; = S extends `${Chars}${infer SS}` ? Trim\u0026lt;SS\u0026gt; : S extends `${infer SS}${Chars}` ? Trim\u0026lt;SS\u0026gt; : S æ€»ç»“ 4 ä¸ªåœºæ™¯æ‹ä¸‹æ¥ï¼Œä½¿ç”¨ infer æå–ç±»å‹çš„å…³é”®åœ¨äºå†™å‡ºç¬¦åˆä¸åŒæ•°æ®ç»“æ„çš„æ¨¡å¼ï¼Œç„¶åå¡«ç©ºå³å¯ã€‚æ—¥å¸¸ä¸šåŠ¡å¼€å‘ï¼Œè¿™äº›è¢‹é¼ æ‘‡åŸºæœ¬å¤Ÿç”¨äº†~ ğŸ¦˜\nhttps://www.typescriptlang.org/docs/handbook/2/conditional-types.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":7,"section":"posts","tags":null,"title":"Typescript ä½¿ç”¨ infer çš„4ç§åœºæ™¯","uri":"https://sssylvan.github.io/posts/typescript-%E4%BD%BF%E7%94%A8-infer-%E7%9A%844%E7%A7%8D%E5%9C%BA%E6%99%AF/"},{"content":" åœ¨ Javascript ä¸­ï¼Œundefined å’Œ null æ˜¯è‹¥å³è‹¥ç¦»çš„ç©ºå€¼ä¸¤å…„å¼Ÿ ğŸ§‘â€ğŸ¤â€ğŸ§‘ï¼ˆnullish value1ï¼‰ã€‚æˆ‘ä»¬æœ‰æ—¶å€™æŠŠå®ƒä»¬è§†ä¸ºä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œæœ‰æ—¶å€™åˆæŠŠå®ƒä»¬ä½œç›¸åŒçš„å¤„ç†ã€‚\næ¦‚å¿µä¸åŒ ä»æ•°æ®è§’åº¦è®²ï¼Œä¸¤è€…å®Œå…¨æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼š\nundefined è¡¨ç¤ºå€¼ä¸å­˜åœ¨ã€‚å†…å­˜ç©ºé—´æ‰¾ä¸åˆ°å˜é‡å¯¹åº”çš„å€¼ null åˆ™æ˜¯ä¸€ä¸ªå­—é¢é‡â€œç©ºâ€ã€‚å˜é‡æŒ‡å‘å†…å­˜é‡Œè¡¨ç¤ºâ€œç©ºâ€çš„åœ°å€ ä¸‹é¢è¿™å¼ å›¾èƒ½ç›´è§‚çœ‹åˆ°ä¸¤è€…çš„å·®å¼‚ï¼š\n2\nç»™å‡½æ•°å‚æ•°çš„è®¾ç½®é»˜è®¤å€¼åªå¯¹ undefined ç”Ÿæ•ˆ\n1 2 3 4 5 6 7 function test(num = 1) { console.log(typeof num) } test() // \u0026#39;number\u0026#39; (num is set to 1) test(undefined) // \u0026#39;number\u0026#39; (num is set to 1 too) test(null) // \u0026#39;object\u0026#39; (num is set to null) å®é™…ä¸šåŠ¡ä¸­ä¹Ÿæœ‰åŒºåˆ†çš„åœºæ™¯ï¼Œæ¯”å¦‚è¡¨å•æœ‰ä¸€æ•°å€¼é¡¹ï¼Œç”¨æˆ·ä¸è¾“å…¥å’Œè¾“å…¥åæ¸…ç©ºï¼Œé¡µé¢æ˜¾ç¤ºè¯¥é¡¹éƒ½ä¸ºç©ºï¼Œä½†æ˜¯å‰è€…è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰ä»»ä½•æ“ä½œï¼Œåè€…åˆ™è¡¨ç¤ºç”¨æˆ·å¡«å†™å€¼æ˜¯ nullã€‚\nNullish å®¶æ— ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ ==ï¼ˆThe Abstract Equality Comparison Algorithm 3ï¼‰åœ¨æ¯”è¾ƒå‰å°†ä¸¤ä¸ªè¢«æ¯”è¾ƒçš„å€¼è½¬æ¢ä¸ºç›¸åŒç±»å‹ã€‚ä½† null == undefined æ˜¯ç‰¹ä¾‹ï¼Œå®ƒä¿©çš„æŠ½è±¡ç›¸ç­‰æ¯”è¾ƒçš„ç»“æœæ˜¯ trueã€‚\nThe comparison x == y, where x and y are values, produces true or false. Such a comparison is performed as follows:\nIf x is null and y is undefined, return true. If x is undefined and y is null, return true. ä¸¤å…„å¼Ÿè®¤ç¥–å½’å®— Nullish å®¶æ— ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ã€‚Nullish å®¶æ—ç›®å‰æœ‰ 3 ä¸ªæŠ€èƒ½ï¼šç©ºå€¼åˆå¹¶æ“ä½œç¬¦ ??ï¼ˆNullish coalescing operator4ï¼‰ã€ç©ºå€¼åˆå¹¶èµ‹å€¼ ??=ï¼ˆNullish coalescing assignmentï¼‰ã€å¯é€‰é“¾ (?.)ï¼ˆOptional chainingï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // Nullish coalescing operator const foo = null ?? \u0026#39;default\u0026#39; // \u0026#34;default\u0026#34; const boo = undefined ?? \u0026#39;default\u0026#39; // \u0026#34;default\u0026#34; // Nullish coalescing assignment const a = { duration: null } a.duration ??= 10 a.speed ??= 25 a // {duration: 10, speed: 25} // Optional chaining const greet = null greet?.() // undefined const sing = undefined sing?.() // undefined æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªå®¶æ—é‡Œï¼Œä¸ªäººæ„Ÿè§‰æ˜¯ä¸ºäº†ç²¾ç®€å•°å—¦çš„åˆ¤æ–­è¯­æ³•ï¼ŒNullish å®¶æ—çš„æŠ€èƒ½éƒ½å¯ç”¨å…¶å®ƒæ–¹å¼å®ç°ã€‚ä½†å› ä¸ºå®é™…ä¸šåŠ¡ä¸­å®ƒä¿©åŒæ—¶å‡ºç°çš„é¢‘ç‡å®åœ¨å¤ªé«˜ï¼Œç´¢æ€§æ•´åˆåˆ°ä¸€èµ·ã€‚\næ¯”å¦‚è¡¨å•æœ‰ä¸€æ•°å€¼é¡¹å’Œæ ¹æ®è¯¥æ•°å€¼è®¡ç®—å¾—åˆ°çš„ç»“æœã€‚æ•°å€¼æ˜¯ null å’Œ undefined æ—¶å¯èƒ½ä¸æ˜¾ç¤ºç»“æœã€‚\nundefined çš„å†å² ä»¥ä¸‹å†…å®¹æˆªå–è‡³ undefined ä¸ null çš„åŒºåˆ« - é˜®ä¸€å³°\n1995 å¹´JavaScript è¯ç”Ÿä¹‹åˆåƒ Java ä¸€æ ·ï¼Œåªè®¾ç½®äº† null ä½œä¸ºè¡¨ç¤º\u0026quot;æ— \u0026quot;çš„å€¼ã€‚\næ ¹æ® C è¯­è¨€çš„ä¼ ç»Ÿï¼Œnull è¢«è®¾è®¡æˆå¯ä»¥è‡ªåŠ¨è½¬ä¸º 0ã€‚\n1 2 Number(null) // 0 5 + null // 5 ä½†æ˜¯ï¼ŒJavaScript çš„è®¾è®¡è€… Brendan Eichï¼Œè§‰å¾—è¿™æ ·åšè¿˜ä¸å¤Ÿï¼Œæœ‰ä¸¤ä¸ªåŸå› ã€‚\né¦–å…ˆï¼Œnull åƒåœ¨ Java é‡Œä¸€æ ·ï¼Œè¢«å½“æˆä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒJavaScript çš„æ•°æ®ç±»å‹åˆ†æˆåŸå§‹ç±»å‹ï¼ˆprimitiveï¼‰å’Œåˆæˆç±»å‹ï¼ˆcomplexï¼‰ä¸¤å¤§ç±»ï¼ŒBrendan Eich è§‰å¾—è¡¨ç¤º\u0026quot;æ— \u0026quot;çš„å€¼æœ€å¥½ä¸æ˜¯å¯¹è±¡ã€‚\nå…¶æ¬¡ï¼ŒJavaScript çš„æœ€åˆç‰ˆæœ¬æ²¡æœ‰åŒ…æ‹¬é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå‘ç”Ÿæ•°æ®ç±»å‹ä¸åŒ¹é…æ—¶ï¼Œå¾€å¾€æ˜¯è‡ªåŠ¨è½¬æ¢ç±»å‹æˆ–è€…é»˜é»˜åœ°å¤±è´¥ã€‚Brendan Eich è§‰å¾—ï¼Œå¦‚æœ null è‡ªåŠ¨è½¬ä¸º 0ï¼Œå¾ˆä¸å®¹æ˜“å‘ç°é”™è¯¯ã€‚\nå› æ­¤ï¼ŒBrendan Eich åˆè®¾è®¡äº†ä¸€ä¸ª undefinedã€‚\nJavascript è®¾è®¡ä¹‹åˆæ˜¯è¿è¡Œåœ¨å®¢æˆ·ç«¯çš„åŠ¨æ€è§£é‡Šå‹è¯­è¨€ï¼Œå¯¹æ•°æ®æ²¡æœ‰çº¦æŸåŠ›ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦æœ‰ä¸å­˜åœ¨è¿™ä¸€æ¦‚å¿µã€‚\næœ‰ç‚¹å¥‡æ€ªçš„ null å¥‡æ€ªçš„ç±»å‹ï¼Œnull æ˜¯åŸå§‹ç±»å‹ï¼ˆprimitive ï¼‰ä¸­çš„ä¸€å‘˜ï¼Œä½† typeof null çš„ç»“æœæ˜¯ objectã€‚å˜¿ï¼Œè¿™å…¶å®æ˜¯å¤§ä½¬ç•™ä¸‹çš„ä¸€å¨ ğŸ’©5ã€‚JavaScript å€¼åŒ…å«ç±»å‹æ ‡è®°å’Œå€¼ã€‚ 000 è¡¨ç¤ºå¯¹è±¡ç±»å‹ï¼Œè€Œ null åˆšå¥½æ˜¯ 32 ä¸ª 0 ã€‚\nä¸è¡Œï¼Œè¿™å¨æˆ‘åƒä¸ä¸‹ã€‚ä¸€å®šè¦æ‹¿åˆ° null ç±»å‹ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ç”¨ === strict equalityï¼‰\n1 Object.prototype.toString.call(null) // \u0026#39;[object Null]\u0026#39; å¥‡æ€ªçš„æ•°å€¼è½¬æ¢ï¼Œè¿™æ˜¯åªèƒ½åƒçš„ä¸€å¨~ 6\n1 2 Number(null) // 0 null == 0 // false åŸå‹é“¾çš„çš„ç»ˆç‚¹æ˜¯ null 7\n1 Object.prototype.__proto__ // null æ€»ç»“ undefined å’Œ null ä»æ•°æ®è§’åº¦çœ‹ï¼Œæœ‰æœ¬è´¨çš„ä¸åŒï¼šnull æ˜¯ç©ºå€¼ï¼Œundefined æ˜¯ä¸å­˜åœ¨ã€‚å¦‚æœä¸šåŠ¡ä¸Šéœ€è¦æ˜ç¡®åŒºåˆ†ï¼Œåœ¨æäº¤æ•°æ®æ—¶åº”è¯¥æ³¨æ„ã€‚è€Œåœ¨å®¢æˆ·ç«¯æ¶ˆè´¹æ•°æ®æ—¶ï¼Œä¸¤ä¸ªéƒ½æ˜¯ æ— æ•ˆå€¼ï¼Œå¯ä»¥ä½¿ç”¨ Nullish å®¶æ—æŠ€èƒ½ï¼Œç”¨æ›´ç®€æ´çš„è¯­æ³•å®ç°éœ€æ±‚ã€‚\nhttps://developer.mozilla.org/en-US/docs/Glossary/Nullish\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://stackoverflow.com/questions/5076944/what-is-the-difference-between-null-and-undefined-in-javascript\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://262.ecma-international.org/5.1/#sec-11.9.3\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://2ality.com/2013/10/typeof-null.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://262.ecma-international.org/5.1/#sec-9.3\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":8,"section":"posts","tags":null,"title":"undefined å’Œ null  é‚£äº›äº‹","uri":"https://sssylvan.github.io/posts/undefined-%E5%92%8C-null-%E9%82%A3%E4%BA%9B%E4%BA%8B/"},{"content":"ä¸ Angular çš„å¼€ç®±å³ç”¨ä¸åŒï¼Œå­¦å®Œ React å®˜ç½‘çš„ Api ä¹‹åï¼Œæ‰‹é‡Œåªæ˜¯æœ‰äº†æŠŠ AK-47 ğŸ”«ã€‚æƒ³è¦èµ°ä¸Šäººç”Ÿå·…å³°ï¼Œèµ¢å–ç™½å¯Œç¾ ğŸ’ƒï¼Œè¿˜è¦æŒ‘é€‰åœ°å›¾ï¼ˆè·¯ç”±ï¼‰ï¼Œé€šè®¯è®¾å¤‡ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ç­‰ç­‰æ–¹æ¡ˆã€‚ä¸‹é¢è®²è®²çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ Zustand çš„å®è·µç»å†ã€‚\nä¸ºä»€ä¹ˆå¼•å…¥çŠ¶æ€ç®¡ç† å‰ç«¯ä¸‰å¤§æ¡†æ¶ Reactã€Angularã€Vueï¼ŒçŠ¶æ€ä¼ é€’éƒ½æ˜¯è‡ªä¸Šè€Œä¸‹ï¼Œå­ç»„ä»¶ä¹‹é—´çš„æƒ³è¦ä¼ é€’çŠ¶æ€è¦é€šè¿‡çˆ¶/ç¥–å…ˆç»„ä»¶è§£å†³ï¼ˆæå‡ stateï¼‰ï¼Œè¿™å¯èƒ½ä¼šè§¦å‘ä¸å¿…è¦çš„æ›´æ–°ã€‚åœºæ™¯å¦‚ä¸‹ï¼š\nApp åˆ†ä¸º Aã€B ä¸¤ä¸ªç»„ä»¶ï¼ŒAã€B ç»„ä»¶åˆæœ‰å„è‡ªçš„å­ç»„ä»¶ã€‚å­ç»„ä»¶ A1ï¼ŒB2 ç›¸äº’é€šè®¯ï¼Œå…¶ä»–ç»„ä»¶ä¸å—å½±å“ã€‚\nä¸ºæ­¤ Angular å¯ä»¥é€šè¿‡ Service è§£å†³ï¼ŒVue æœ‰å®˜æ–¹è§£å†³æ–¹æ¡ˆ Vuexï¼Œè€Œ React æ²¡æœ‰å®˜æ–¹æ–¹æ¡ˆï¼Œå› æ­¤å‚¬ç”Ÿäº†å¤§é‡çš„ç¤¾åŒºæ–¹æ¡ˆï¼šReduxã€Zustandã€Recoilã€Mobxã€Jotai ç­‰ç­‰ã€‚\nä¸ºä»€ä¹ˆæ˜¯ Zustand åœ¨æŒ‘é€‰è§£å†³æ–¹æ¡ˆæ—¶ï¼Œé¦–å…ˆçœ‹çš„è‡ªç„¶æ˜¯å¤§åé¼é¼çš„ Reduxï¼Œæ¸…æ™°çš„æ•°æ®æµã€UI æ¡†æ¶æ— å…³æ€§ã€é…å¥—å¼€å‘å·¥å…·ã€‚ã€‚ä½†è¦å†™å¾ˆå¤šèƒ¶æ°´ä»£ç ç²˜åˆå„ä¸ªæ“ä½œï¼Œå¦å¤–æ€ä¹ˆçº¦æŸ type å‘½åï¼Œä¿è¯å”¯ä¸€æ€§ä¹Ÿæ˜¯é—®é¢˜ï¼ˆæœ‰æ¸…æ¥šçš„å¤§ä½¬ï¼Œéº»çƒ¦å‘ŠçŸ¥ä¸‹ ğŸ˜™ï¼‰ã€‚å°±æˆ‘å·²çŸ¥çš„ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒRedux è™½ç„¶ç†å¿µç®€å•ç”Ÿæ€å¼ºï¼Œä½†å†™èµ·æ¥éº»çƒ¦ï¼Œä¸”æƒ³è¦åœ¨é¡¹ç›®ä¸Šç”¨èµ·æ¥ï¼Œè¿˜å¾—å­¦ä¹  Redux Toolkit è¿™äº›ä¸­é—´ä»¶ã€‚\nç„¶åæ˜¯æœ‹å‹æ¨èçš„ Zustand ï¼ˆå¾·æ–‡ï¼šçŠ¶æ€ï¼‰ã€‚Zustand æ˜¯åŸºäº Hooks å®ç°çš„æ–¹æ¡ˆï¼Œæ¯” Redux æ›´çµæ´»æ›´ç®€å•ã€‚æä¾›å¤šç§çŠ¶æ€ç®¡ç†é£æ ¼ï¼Œ1.1k è¶…è½»é‡ï¼Œ29k+ çš„ starï¼Œæå°‘çš„ issueï¼Œé€æ¸ä¸Šå‡çš„ä¸‹è½½é‡ã€‚æ ¹æ®æˆ‘ä»¬é¡¹ç›®çš„ç‰¹ç‚¹ï¼ˆä» Angular è¿ç§»ï¼‰ï¼šæ²¡æœ‰å†å²åŒ…è¢±ï¼Œå¸Œæœ›å¿«é€Ÿå¼€å‘ã€‚Zustand æ˜¯æ¯” Redux æ›´ä¼˜çš„æ–¹æ¡ˆã€‚\n1\nstore çš„åˆ›å»ºã€è°ƒç”¨å’Œæ›´æ–° å…ˆå®ç°æ–‡ç« å¼€å¤´æå‡ºçš„éœ€æ±‚ï¼šå­ç»„ä»¶ä¼ é€’çŠ¶æ€ã€‚åˆ›å»º storeï¼ŒæŒ‰å›¾ç¤ºç»“æ„åˆ›å»ºç»„ä»¶ï¼Œå¹¶åœ¨æ¯ä¸ªå‡½æ•°ç»„ä»¶ä¸­è¾“å‡ºå…¶ç»„ä»¶åï¼Œå…¶ä¸­ A1 ç»„ä»¶ oneup å¯ä»¥ä¿®æ”¹ B1 ç»„ä»¶ count ï¼Œæ®æ­¤æŸ¥çœ‹å½±å“èŒƒå›´ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 import { create } from \u0026#39;zustand\u0026#39; const useStore = create((set, get) =\u0026gt; ({ count: 0, actions: { inc: () =\u0026gt; set((state) =\u0026gt; ({ count: state.count + 1 })), }, })) function A1() { console.log(\u0026#39;A1\u0026#39;) const actions = useStore((state) =\u0026gt; state.actions) return ( \u0026lt;div\u0026gt; \u0026lt;span\u0026gt;A1\u0026lt;/span\u0026gt; \u0026lt;button onClick={actions.inc}\u0026gt;one up\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ) } function A2() { console.log(\u0026#39;A2\u0026#39;) return \u0026lt;div\u0026gt;A2\u0026lt;/div\u0026gt; } function B1() { console.log(\u0026#39;B1\u0026#39;) return \u0026lt;div\u0026gt;B1\u0026lt;/div\u0026gt; } function B2() { console.log(\u0026#39;B2\u0026#39;) const count = useStore((state) =\u0026gt; state.count) const actions = useStore((state) =\u0026gt; state.actions) return ( \u0026lt;div\u0026gt; \u0026lt;span\u0026gt;B2:{count}\u0026lt;/span\u0026gt; \u0026lt;button onClick={actions.inc}\u0026gt;one up\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ) } function A() { console.log(\u0026#39;A\u0026#39;) return ( \u0026lt;div\u0026gt; \u0026lt;A1 /\u0026gt; \u0026lt;A2 /\u0026gt; \u0026lt;/div\u0026gt; ) } function B() { console.log(\u0026#39;B\u0026#39;) return ( \u0026lt;div\u0026gt; \u0026lt;B1 /\u0026gt; \u0026lt;B2 /\u0026gt; \u0026lt;/div\u0026gt; ) } export default function App() { return ( \u0026lt;div className=\u0026#34;main\u0026#34;\u0026gt; \u0026lt;A /\u0026gt; \u0026lt;B /\u0026gt; \u0026lt;/div\u0026gt; ) } é¦–æ¬¡æ¸²æŸ“è¿‡åï¼Œç‚¹å‡» one up æŒ‰é’®ï¼Œæ§åˆ¶å°åªä¼šè¾“å‡º B2ã€‚\nåˆ›å»º store ï¼šcreate((set,get)=\u0026gt;initialState) ã€‚å…¶ä¸­ set æ›´æ–° stateï¼Œget è·å– stateã€‚\nçŠ¶æ€è·å– ï¼š\nè·å–å…¨éƒ¨ï¼šconst state = useStore() âŒã€‚ä»»ä¸€çŠ¶æ€æ›´æ”¹å°†æ›´æ–°ç»„ä»¶ï¼Œé¡¹ç›®ä¸­ä¸è¦ä½¿ç”¨ã€‚ æŒ‰éœ€è·å–ï¼ˆstate slicesï¼‰ï¼šconst stateSlice = useStore(selector,equals?); âœ”ï¸ã€‚equals é»˜è®¤ä¸º old === new ä¸¥æ ¼ç›¸ç­‰ã€‚ä¸å»ºè®®ä¸ºäº†å°‘å†™å‡ è¡Œä»£ç ä½¿ç”¨ shallowã€‚ getter è®¡ç®—å€¼\né”™è¯¯æ–¹å¼ âŒï¼š\n1 2 3 4 5 6 const useStore = create((set, get) =\u0026gt; ({ count: 1, get halfCount() { return get().count / 2 }, })) æ­£ç¡®æ–¹å¼ âœ”ï¸ï¼š\n1 2 3 4 5 6 7 8 const useStore = create((set, get) =\u0026gt; ({ count: 1, computed: { get halfCount() { return get().count / 2 }, }, })) çŠ¶æ€æ›´æ–°ï¼š\nset é»˜è®¤ä¸º åˆå¹¶ state set(state =\u0026gt; ({slice:newSlice}))ï¼Œä¹Ÿå¯ä»¥ç¦ç”¨åˆå¹¶è¡Œä¸º set((state) =\u0026gt; newState, true)ã€‚\næ›´æ–°æ“ä½œï¼Œå»ºè®®å®šä¹‰åœ¨ actions å†…ï¼Œ æå‡å¯è¯»æ€§ï¼Œè°ƒç”¨å¤šä¸ª action æ˜¯ä¹Ÿæ›´æ–¹ä¾¿ã€‚\næ¨èä½¿ç”¨ âœ”ï¸ï¼š\n1 2 3 4 5 6 const useStore = create((set, get) =\u0026gt; ({ count: 0, actions: { inc: () =\u0026gt; useStore.setState((state) =\u0026gt; ({ count: state.count + 1 })), }, })) ç»„ä»¶çº§åˆ« store Zustand é»˜è®¤ä¸ºå…¨å±€çŠ¶æ€ã€‚ç»„ä»¶çº§åˆ«çš„çŠ¶æ€ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ç»“åˆ React.context å®ç°ã€‚ä¸ä¼šè§¦å‘ä¸å¿…è¦çš„æ›´æ–°ï¼š\nInitialize state with props How to make a store instance per Component ? æœªå®Œå¾…ç»­\u0026hellip;\nIs Redux DEAD? Try Zustand!\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":9,"section":"posts","tags":null,"title":"Zustand å®è·µæ€»ç»“","uri":"https://sssylvan.github.io/posts/zustand-%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/"},{"content":"ä» Angular è½¬åˆ°ç”¨ React Hooks å†™é¡¹ç›®ç»å¸¸ä¼šå‡ºç°å›°æƒ‘ï¼Œæˆ‘ä»£ç å†™å¾—æ²¡é—®é¢˜å•Šï¼Œå’‹å°±ä¸èƒ½æ­£å¸¸è¿è¡Œå‘¢ ï¼ŸğŸ˜… è¿™é‡Œçš„ â€œæ²¡é—®é¢˜â€ æŒ‡çš„æ˜¯åœ¨ JavaScript è¯­æ³•ä¸Šæ²¡é—®é¢˜ï¼Œä½†åœ¨ Hooks é¢†åŸŸä¸‹æ˜¯æœ‰é—®é¢˜çš„ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç§ä»£ç ï¼š\n1 2 3 4 5 const [count, setCount] = useState(0) useEffect(() =\u0026gt; { setCount(count + 1) }) ä»£ç åªè°ƒç”¨äº†ä¸€æ¬¡ setCount ï¼Œå®é™…è¿è¡Œå´å½¢æˆäº†æ­»å¾ªç¯ã€‚\nReact Hooks æ˜¯ä¸ºå®¢æˆ·ç«¯åœºæ™¯é‡èº«å®šåšçš„ä¸€å¥—â€œå‡½æ•°å¼â€è§£å†³æ–¹æ¡ˆã€‚ä¸ Hooks æœ‰å…³çš„å˜é‡ã€å‡½æ•°ï¼Œéƒ½ä¸èƒ½åªä»ä»£ç çš„å¯¹é”™å»åˆ†æè¿è¡Œç»“æœã€‚ä»£ç æ‰§è¡Œå‡ºé”™äº†è‚¯å®šæœ‰é—®é¢˜ï¼Œä»£ç æ‰§è¡Œå¯¹äº†ä¹Ÿä¸ä¸€å®šæ­£ç¡®ã€‚æ­£å¸¸ !== æ­£ç¡®\nç”¨ JavaScript è¯­è¨€çš„ç›´è§‰å†™/çœ‹ Hooksï¼Œä¸­é—´è¿˜è¦ç†è§£ä¸€å±‚åŸç†ï¼ˆæ¯”å¦‚é—­åŒ…ï¼‰ï¼Œå¾ˆç´¯ï¼Œå¿ƒæ™ºè´Ÿæ‹…é‡ã€‚å°±åƒæˆ‘è¦ç”¨çœ¼å‰è¿™å°æ˜¾ç¤ºå™¨ï¼Œè¦æƒ³ä¿¡å·å¦‚ä½•ä¼ è¾“ï¼Œç”»é¢å¦‚ä½•æ˜¾ç¤ºï¼Ÿå®é™…æˆ‘çš„ç›´è§‰æ˜¯é€šç”µï¼Œæ’ä¸Šä¿¡å·çº¿ï¼Œå°±èƒ½æ­£å¸¸å·¥ä½œã€‚\nå»ºç«‹ä½¿ç”¨ React Hooks çš„å¿ƒæ™ºæ¨¡å‹1ï¼Œå†™/çœ‹åˆ° Hooks å½¢æˆç›´è§‰ï¼Œæ‰èƒ½è½»æ¾æ„‰å¿«çš„å¼€å‘é¡¹ç›®ã€‚\nç›´è§‰æ˜¯ç›´æ¥å¾—åˆ°çš„æ„Ÿè§‰ï¼Œå³åœ¨ç»éªŒå’Œå·²æœ‰çŸ¥è¯†çš„åŸºç¡€ä¸Šï¼Œä¸ç»è¿‡é€»è¾‘æ¨ç†è€Œç›´æ¥è¿…é€Ÿåœ°è®¤çŸ¥äº‹ç‰©çš„æ€ç»´æ´»åŠ¨ã€‚å¯¹ä»£ç æ¥è®²ï¼Œç›´è§‰æ˜¯çœ‹åˆ°ä¸€ä¸²å­—ç¬¦å¾—åˆ°å…¶è¿è¡Œç»“æœï¼Œæ¯”å¦‚ setTimeout(cb,1000) = 1 ç§’åä¼šæ‰§è¡Œ cb å‡½æ•°ï¼Œå®é™…å¯èƒ½æ¯” 1s è¦é•¿ã€‚\nä¸‹é¢å¼€å§‹åˆ†æã€å®è·µï¼Œæ€»ç»“å‡º Hooks = what.\nå®¢æˆ·ç«¯åœºæ™¯ å®¢æˆ·ç«¯åœºæ™¯ç®€å•äº†è¯´å°±æ˜¯ï¼šçŠ¶æ€ + å¼‚æ­¥ã€‚å…¶ä¸­å¼‚æ­¥åˆåŒ…æ‹¬ç”¨æˆ·æ“ä½œå’Œå‘é€è¯·æ±‚ç­‰å‰¯ä½œç”¨ã€‚\nHooks çš„â€œå‡½æ•°å¼â€è§£å†³æ–¹æ¡ˆæ˜¯ï¼š\nuseState è´Ÿè´£æ˜¾ç¤º/æ›´æ–°çŠ¶æ€ synthetic event åˆæˆäº‹ä»¶å“åº”ç”¨æˆ·æ“ä½œ useEffect è´Ÿè´£å‘é€è¯·æ±‚ç­‰å‰¯ä½œç”¨ è‡³äºå…¶ä»– Hooksï¼Œéƒ¨åˆ†åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ¨åˆ†ç”¨æ¥ä¼˜åŒ–æ€§èƒ½ã€‚\nåˆæˆäº‹ä»¶ï¼ˆsynthetic eventï¼‰çš„è¯»/å†™å’ŒåŸç”Ÿäº‹ä»¶ç±»ä¼¼ã€‚ä¸‹é¢çœ‹çœ‹ useState ã€useEffect\nuseStateï¼šç»„ä»¶å‡½æ•°éå¹‚ç­‰çš„å¤šæ¬¡è¿è¡Œ useState(initialState) ï¼Œæ¥æ”¶ä¸€ä¸ªèƒ½å¾—åˆ° initialState å‚æ•°ï¼ˆå¯ä»¥æ˜¯å‡½æ•°ï¼‰ã€‚è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„æ•°ç»„ [state, setState]ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯å½“å‰çŠ¶æ€ï¼Œç”¨æ¥æ˜¾ç¤ºï¼Œç¬¬äºŒä¸ªå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å— newState ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥æ›´æ–°çŠ¶æ€ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import { useState } from \u0026#39;react\u0026#39; export default function App() { console.log(\u0026#39;App\u0026#39;) const [count, setCount] = useState(0) console.log(\u0026#39;count: \u0026#39;, count) const handleClick = () =\u0026gt; { console.log(\u0026#39;handleClick\u0026#39;) setCount(count + 1) } return ( \u0026lt;div\u0026gt; {count} \u0026lt;button onClick={handleClick}\u0026gt;+1\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ) } é¦–æ¬¡æ‰“å¼€é¡µé¢ï¼ŒæŒ‰æ­£å¸¸çš„å‡½æ•°æ‰§è¡Œï¼Œé¡µé¢æ˜¾ç¤ºå’Œæ§åˆ¶å°è¾“å‡ºéƒ½æ²¡é—®é¢˜ï¼š\næ¸…ç©ºæ§åˆ¶å°è¾“å‡ºï¼Œç‚¹å‡» +1 æŒ‰é’®å¾—åˆ°çš„ç»“æœï¼Œå°±å’Œå¸¸è§„çš„å‡½æ•°æœ‰å·®åˆ«äº†ï¼Œä¸åªæ˜¯è¾“å‡º 1 æ¬¡ handleClickï¼š\nApp ç»„ä»¶å‡½æ•°è¢«é‡æ–°æ‰§è¡Œäº†ï¼Œcount æ‰“å°çš„ä¸å†æ˜¯ 0ï¼Œæ˜¯ 1ï¼Œé¡µé¢æ˜¾ç¤ºçš„ count ä¹Ÿæ˜¯ 1ã€‚\nç»§ç»­ç‚¹å‡» +1ï¼ŒApp ç»„ä»¶å‡½æ•°åˆä¼šé‡æ–°æ‰§è¡Œï¼Œcount ç»§ç»­ç´¯åŠ ã€‚ç»è¿‡å®è·µè§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š\nä¸€æ¬¡ setState ä¼šè§¦å‘ä¸€æ¬¡ç»„ä»¶å‡½æ•°çš„æ‰§è¡Œï¼Œä¸”æ˜¯éå¹‚ç­‰çš„ initialState åœ¨éç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ä¼šè¢«å¿½ç•¥ åœ¨ setCount ä¹‹åè¾“å‡º count å€¼ï¼ŒæŸ¥çœ‹ count æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼š\nsetCount ä¹‹å count å€¼ä»ç„¶æ˜¯å½“å‰çŠ¶æ€ 0ï¼ŒsetCount ä¸æ˜¯åŒæ­¥æ”¹å˜çŠ¶æ€ã€‚\nsetState æ›´æ–°çŠ¶æ€æ˜¯å¼‚æ­¥çš„ å¢åŠ ä¸€ä¸ª stateï¼Œå¹¶ä¸”å’Œ setCount åŒæ—¶ setStateï¼š\nç‚¹å‡» +1 æŒ‰é’®ï¼Œ App ç»„ä»¶å‡½æ•°åªæ‰§è¡Œäº†ä¸€æ¬¡ã€‚\nä¸€ä¸ªæµç¨‹æ‰§è¡Œå¤šæ¬¡/å¤šä¸ª setStateï¼Œåªä¼šæ›´æ–°ä¸€æ¬¡ ä½¿ç”¨ useState æ—¶ï¼Œä¸èƒ½ç”¨å‡½æ•°å¼çš„å¹‚ç­‰æ¥ç†è§£å‡½æ•°ç»„ä»¶ï¼Œå¾—ä»¥å¤šæ¬¡è¿è¡Œçš„éå¹‚ç­‰æ¥çœ‹ã€‚å½“ç„¶å¯¹äºç»„ä»¶ä½¿ç”¨è€…è€Œè¨€ï¼Œä»ç„¶æ˜¯å¹‚ç­‰çš„ã€‚\nuseEffectï¼šå‰¯ä½œç”¨æ€»ç®¡å®¶ useEffect è´Ÿè´£ç®¡ç†å‰¯ä½œç”¨ï¼Œå…·ä½“åŒ…æ‹¬å‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœºå’Œæ‰§è¡Œæ¬¡æ•°ã€‚\næ—¢ç„¶æ˜¯æ€»ç®¡å®¶ï¼Œæ‰€æœ‰çš„å‰¯ä½œç”¨éƒ½åº”è¯¥å†™åœ¨ useEffect é‡Œé¢ã€‚\nuseEffect(setup, deps?) æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¿…ä¼ çš„å›è°ƒå‡½æ•° setupã€ä¸€ä¸ªå¯é€‰çš„ä¾èµ–æ•°ç»„ depsï¼Œè¿”å› undefinedã€‚\nsetup å‡½æ•°åœ¨ render åæ‰§è¡Œä¸”è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚setup è¿”å›çš„å‡½æ•°ï¼Œä¼šåœ¨ç»„ä»¶ unmount åæ‰§è¡Œ useEffect(() =\u0026gt; { return () =\u0026gt; {} }, [])ã€‚\ndeps å‚æ•°ä¼šå½±å“ setup å‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š\nuseEffect(()=\u0026gt;{})ï¼Œæ¯æ¬¡ render åéƒ½æ‰§è¡Œ useEffect(() =\u0026gt; {}, [])ï¼Œä»…ç¬¬ä¸€æ¬¡ render åæ‰§è¡Œ useEffect(() =\u0026gt; {}, [deps])ï¼Œæä¾›ä¾èµ–é¡¹æ•°ç»„ï¼Œç¬¬ä¸€æ¬¡ä»¥åŠä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œ æ€»ç»“ ç»è¿‡ä¸€ç•ªæ—¶é—´å®è·µè§‚å¯Ÿ ğŸ•µï¼Œå¯ä»¥å»ºç«‹ä»¥ä¸‹ä¸ React Hooks æœ‰å…³çš„ç›´è§‰ï¼š\nå®¢æˆ·ç«¯ = çŠ¶æ€ + å¼‚æ­¥ const [state, setState] = useState(initialState) initialState = åœ¨éç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ä¼šè¢«å¿½ç•¥ state = ä¸å¯å˜çš„å½“å‰çŠ¶æ€ setState(newState) = ä½¿ç”¨ Object.is æ¯”è¾ƒ state å’Œ newState ï¼Œæœ‰å˜æ›´åˆ™å¼‚æ­¥æ›´æ–°çŠ¶æ€ï¼Œè§¦å‘ä¸€æ¬¡ç»„ä»¶å‡½æ•°çš„éå¹‚ç­‰æ‰§è¡Œå’Œ renderã€‚ å¤šæ¬¡/å¤šä¸ª setState(newState) = æ›´æ–°ä¸€æ¬¡ useEffect(setup, deps?) æ‰€æœ‰çš„å‰¯ä½œç”¨éƒ½åº”è¯¥å†™åœ¨ useEffect é‡Œé¢ setup = åœ¨ render åæ‰§è¡Œä¸”è‡³å°‘æ‰§è¡Œä¸€æ¬¡ setup è¿”å›å‡½æ•° = åœ¨ç»„ä»¶ unmount åæ‰§è¡Œ deps = setup å‡½æ•°çš„æ‰§è¡Œæ¬¡æ•° useEffect(()=\u0026gt;{}) = æ¯æ¬¡ render åéƒ½æ‰§è¡Œ useEffect(() =\u0026gt; {}, []) = ä»…ç¬¬ä¸€æ¬¡ render åæ‰§è¡Œ useEffect(() =\u0026gt; {}, [deps]) = ç¬¬ä¸€æ¬¡ä»¥åŠä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œ å›åˆ°å¼€å¤´çš„ä»£ç ï¼Œå¯ä»¥ç›´æ¥ç¿»è¯‘ï¼šæ¯æ¬¡ render åéƒ½å¼‚æ­¥æ›´æ–° countï¼Œè§¦å‘ä¸€æ¬¡ç»„ä»¶å‡½æ•°çš„éå¹‚ç­‰æ‰§è¡Œå’Œ renderï¼Œrender åéƒ½å¼‚æ­¥æ›´æ–° countï¼Œè§¦å‘ä¸€æ¬¡ç»„ä»¶å‡½æ•°çš„éå¹‚ç­‰æ‰§è¡Œå’Œ renderï¼Œ\u0026hellip; å¾—åˆ°äº†æ­»å¾ªç¯çš„è¿è¡Œç»“è®ºã€‚\n1 2 3 useEffect(() =\u0026gt; { setCount(count + 1) }) æœ€åè¿˜æœ‰ä¸¤æ¡å†›æ³•ï¼š\nHooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶çº§ä½œç”¨åŸŸä½¿ç”¨ Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…å…¶å®ƒ Hooks ä¸­ä½¿ç”¨ æ‰€è°“é¡¶å±‚ä½œç”¨åŸŸï¼Œå°±æ˜¯ Hooks ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…åµŒå¥—å‡½æ•°å†…æ‰§è¡Œï¼Œè€Œå¿…é¡»æ˜¯åœ¨é¡¶å±‚ã€‚åŒæ—¶ Hooks åœ¨ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œå¿…é¡»æŒ‰é¡ºåºè¢«æ‰§è¡Œã€‚\nä¸è¦å†ç”¨ Javascript è¯­è¨€çš„ç›´è§‰å†™ React Hooks äº†ï¼Œé‚£æ ·åªä¼šæ”¶è·åç›´è§‰ã€‚é”¤ç‚¼å‡º React Hooks ç›´è§‰ï¼ŒHappy Coding ğŸ˜‰\nå¿ƒæ™ºæ¨¡å‹æ˜¯æŒ‡äººä»¬å¤´è„‘ä¸­å¯¹å¤–ç•Œäº‹ç‰©å’Œç°è±¡çš„è®¤çŸ¥æ¡†æ¶ï¼ŒåŒ…æ‹¬å¯¹å…¶å±æ€§ã€åŠŸèƒ½ã€å…³ç³»ç­‰æ–¹é¢çš„è®¤çŸ¥ã€‚è¿™äº›æ¨¡å‹ç”±æˆ‘ä»¬çš„ç»éªŒå’Œå­¦ä¹ æ‰€å¡‘é€ ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£ã€é¢„æµ‹å’Œè§£é‡Šä¸–ç•Œã€‚å¿ƒæ™ºæ¨¡å‹å¯ä»¥æ˜¯ç®€å•çš„æ€ç»´æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯è¾ƒä¸ºå¤æ‚å’ŒæŠ½è±¡çš„æ¦‚å¿µæ¨¡å‹ã€‚å®ƒä»¬å¯¹æˆ‘ä»¬çš„æ€è€ƒå’Œè¡Œä¸ºäº§ç”Ÿé‡è¦å½±å“ï¼Œå¹¶åœ¨ä¸åŒæƒ…å¢ƒä¸‹ä¸æ–­æ›´æ–°å’Œæ¼”åŒ–ã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":10,"section":"posts","tags":null,"title":"ä½¿ç”¨ React Hooks å¼€å‘æ—¶çš„å¿ƒæ™ºæ¨¡å‹","uri":"https://sssylvan.github.io/posts/%E4%BD%BF%E7%94%A8-react-hooks-%E5%BC%80%E5%8F%91%E6%97%B6%E7%9A%84%E5%BF%83%E6%99%BA%E6%A8%A1%E5%9E%8B/"},{"content":"æœ€è¿‘åœ¨æœ‹å‹çš„å®‰åˆ©ä¸‹ï¼Œè®¤çœŸå­¦ä¹ äº† React Hooksã€‚ä¹‹å‰ç®€å•äº†è§£è¿‡ï¼Œå½“æ—¶çš„æ„Ÿå—æ˜¯ï¼Œå•¥ç©æ„ï¼Ÿå‡½æ•°ååŠ ä¸ª use å°±èƒ½ä¿æŒçŠ¶æ€ï¼Œå–ä»£ç”Ÿå‘½å‘¨æœŸå•¦ã€‚å¯¹äºå–œæ¬¢ kiss çš„æˆ‘æ¥è¯´æœ‰ç‚¹æ¥å—ä¸äº†ï¼Œåˆ«è¯¯ä¼šæ˜¯ Keep It Simple, Stupid ğŸ˜˜ã€‚è¿™æ¬¡è®¤çœŸæ¥è§¦åæœ‰äº†å¾ˆå¤§çš„æ”¹è§‚ï¼Œå’Œ Hooks å¸¦æ¥æ”¶ç›Šç›¸æ¯”ï¼Œè¿™ç‚¹å¿ƒæ™ºæˆæœ¬è²Œä¼¼ä¹Ÿèƒ½æ¥å—ï¼Ÿ\nç»è¿‡æˆ‘å¸ CTO çš„ æ´—è„‘åï¼Œæˆ‘ä¸€ç›´æŒºå–œæ¬¢å‡½æ•°å¼ç¼–ç¨‹ Functional programmingï¼Œå› ä¸ºå®ƒå¤Ÿ Simpleã€‚ä½†å¯¹äºå®¢æˆ·ç«¯æ¥è®²ï¼Œé¡µé¢å……æ–¥ç€æ¥å£è¿”å›çš„çŠ¶æ€ï¼Œç”¨æˆ·æ“ä½œçš„çŠ¶æ€ï¼ŒæŠŠè¿™äº›çŠ¶æ€ç”¨å¯¹è±¡ç®¡ç†èµ·æ¥ï¼Œç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ Object-oriented Programming ä¼¼ä¹æ›´åˆç†æ›´å®¹æ˜“ç†è§£ã€‚\né¡µé¢çš„æ•°æ®æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œç‚¹å‡»è¾“å…¥ç­‰äº‹ä»¶ç»‘å®šå¯¹è±¡çš„æ–¹æ³•ï¼Œé¡µé¢å¯¹è±¡è¿˜æœ‰ç”Ÿå‘½ï¼ˆå‘¨æœŸï¼‰ã€‚å¸¦ç€è¿™æ ·çš„ç†è§£ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘æ‘¸ç´¢å‡ºçš„æœ€ä½³å®è·µæ˜¯ OOP ä¿æŒçŠ¶æ€ï¼ŒFP è®¡ç®—çŠ¶æ€ã€‚å‡è®¾é¡µé¢ä¸¤è¾“å…¥æ¡†ï¼Œå°†è¾“å…¥çš„æ•°å€¼åšåŠ æ³•è¿ç®—ï¼Œæˆ‘ä¼šè¿™ä¹ˆå†™ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 class Addition { num1: number num2: number result: number handleAdd() { this.result = add(this.num1, this.num2) } } function add(n1, n2) { return n1 + n2 } è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼ŒFP çš„å•å…ƒæµ‹è¯•éå¸¸å¥½äº›ï¼Œåªè¦å•å…ƒæµ‹è¯•ä¿è¯ add å‡½æ•°ä¸å‡ºé”™ï¼Œé¡µé¢çš„çŠ¶æ€å°±ä¸ä¼šå‡ºé”™ã€‚åŒæ—¶å…¶ä»–é¡µé¢å‡ºç°ç›¸åŒé€»è¾‘ï¼Œéšæ—¶å¯ä»¥æŠŠ add å‡½æ•°æ”¾åˆ°å…¬å…±åŒ…é‡Œã€‚\nä½†æ˜¯é¡µé¢çš„å±æ€§ã€æ–¹æ³•ã€ç”Ÿå‘½å‘¨æœŸä»ç„¶æ˜¯ä¸å¥½å¤ç”¨çš„ï¼Œè™½è¯´å¯ä»¥æŠ½è±¡å‡º service ç”šè‡³ç›´æ¥æŠ½è±¡ä¸€ä¸ªçˆ¶ç±»ã€‚ä½†æ˜¯ä¸šåŠ¡åƒå˜ä¸‡åŒ–ï¼Œæ­¤åˆ»åˆç†æŠ½è±¡æ²¡å¤šä¹…å¯èƒ½å°±æˆäº†ä¸€ç§è¶…å‰è®¾è®¡ã€‚è¿™æ˜¯ OOP çš„ä¸€å¤§ç—›ç‚¹ï¼ŒæŠ½è±¡çš„é‡è¦å‰ææ˜¯ç¨³å®šï¼Œè€Œä¸šåŠ¡æ˜¯ä¸æ–­å‘å‰å‘å±•å˜åŒ–çš„ã€‚\nå†™äº†ä¸€å¤§å †ä¸ Hooks æ— å…³çš„ï¼Œä¸»è¦è®²æˆ‘è¿™å‡ å¹´ä½¿ç”¨ OOP é‡åˆ°é—®é¢˜ï¼šçŠ¶æ€ä¸èƒ½å¤ç”¨ã€‚åœ¨ä½¿ç”¨è¿‡ Hooks ä¹‹åï¼Œæˆ‘çœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚\nReact ç¤¾åŒºçš„è¿™å¼ å›¾ç›´è§‚åœ°å¯¹æ¯” Class ç»„ä»¶å’Œä½¿ç”¨ Hooks çš„ Functional ç»„ä»¶ï¼Œç»¿è‰²ã€è“è‰²å’Œé»„è‰²ä»£è¡¨ä¸åŒçš„ä¸šåŠ¡åŠŸèƒ½ã€‚\nçœ‹å®Œæˆ‘ç›´æ¥ Hooks YYDS å•Šã€‚Class ç»„ä»¶ä¸­åˆ†æ•£å„å¤„çš„ä¸šåŠ¡é€»è¾‘ï¼Œç»è¿‡ Hooks æ”¹é€ äº•ç„¶æœ‰åºçš„èšåˆåœ¨äº†ä¸€èµ·ã€‚è¿™ä¸å°±æ˜¯ç»„åˆä¼˜äºç»§æ‰¿å—ï¼ŒGreeting ç»„ä»¶ = ç»¿è‰²ä¸šåŠ¡ + è“è‰²ä¸šåŠ¡ + é»„è‰²ä¸šåŠ¡ï¼Œç®€ç›´å®Œç¾å•Šã€‚ä¹‹å‰æƒ³æ€ä¹ˆå¤ç”¨å‡½æ•°ã€å±æ€§ã€æ–¹æ³•å·´æ‹‰å·´æ‹‰ã€‚ã€‚Hooks è½»æ¾å®ç°ä¸šåŠ¡å¤ç”¨ï¼Œç›´æ¥æŒ‰é¢œè‰²æŠŠä»£ç ä¸€æŠ½å°±å®Œäº‹ï¼Œè¿™èƒ½ä¸é¦™å— ğŸ˜ã€‚\nç„¶è€Œå‘½è¿çš„é¦ˆèµ éƒ½æ—©å·²æš—ä¸­æ ‡å¥½äº†ä»·æ ¼ ğŸ˜‚ï¼Œåœ¨ä»”ç»†çš„å†™äº†å‡ ä¸ªæ¡ˆä¾‹ä¹‹åï¼Œæˆ‘å‘ç° Hooks ä¸å…‰æœ‰ç†è§£æˆæœ¬ã€ä½¿ç”¨è§„åˆ™é™åˆ¶ã€é—­åŒ…é™·é˜±è¿˜æœ‰æ€§èƒ½è´Ÿæ‹…ã€‚ä½¿ç”¨ Angularã€Vue åªéœ€è¦åœ¨æ•°æ®é‡å¤§çš„é¡µé¢å…³æ³¨æ€§èƒ½ï¼Œè€Œ React Hooks å¯ä»¥è½»æ¾å†™å‡ºæ­»å¾ªç¯ä»£ç \n1 2 3 useEffect(() =\u0026gt; { setCount((count) =\u0026gt; count + 1) }) ä½†ä¸ç®¡æ€ä¹ˆæ ·ï¼Œå›´ç»•ä¸šåŠ¡ç»„ç»‡ä»£ç çš„å¸å¼•åŠ›å¤ªå¤§äº†ï¼Œæ¥ä¸‹æ¥å°±å°è¯•æ‘¸ç´¢å‡º React Hooks çš„æœ€ä½³å®è·µï¼Œå°½é‡é™ä½ä½¿ç”¨çš„æˆæœ¬ ğŸ¤ ã€‚\n","description":"","id":11,"section":"posts","tags":null,"title":"åˆè¯† React Hooks çš„ä¸€äº›æ€è€ƒ","uri":"https://sssylvan.github.io/posts/%E5%88%9D%E8%AF%86-react-hooks-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/"},{"content":"JavaScript this åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆWeb æµè§ˆå™¨ä¸Šçš„windowå¯¹è±¡æˆ– Node.js ä¸Šçš„globalå¯¹è±¡ï¼‰ã€‚åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡å‘å‡½æ•°çš„è°ƒç”¨è€…ã€‚å¯ä»¥é€šè¿‡ bindã€applyã€call ä¿®æ”¹ this çš„æŒ‡å‘ã€‚\nç®­å¤´å‡½æ•°ä¸æä¾›å®ƒä»¬è‡ªå·±çš„ this ç»‘å®šï¼ˆå®ƒä¿ç•™å°é—­è¯æ³•ä¸Šä¸‹æ–‡çš„ this å€¼ï¼‰ã€‚\nnew new è¿ç®—ç¬¦ç”¨æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚å½“ä½¿ç”¨ new å…³é”®å­—è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°å°†ç”¨ä½œæ„é€ å‡½æ•°ã€‚ new å°†åšä»¥ä¸‹äº‹æƒ…ï¼š\nåˆ›å»ºä¸€ä¸ªç©ºç™½çš„çº¯ JavaScript å¯¹è±¡ å°†ç©ºç™½çš„å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ ä½¿ç”¨ç»™å®šçš„å‚æ•°æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå°†ç©ºç™½å¯¹è±¡ç»‘å®šä¸º this ä¸Šä¸‹æ–‡ å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªéåŸå§‹å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼å°†æˆä¸ºæ•´ä¸ª new è¡¨è¾¾å¼çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°ä¸è¿”å›ä»»ä½•å†…å®¹æˆ–è¿”å›åŸå§‹å€¼ï¼Œåˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ åŸå‹é“¾ åŸå‹æ˜¯ JavaScript å¯¹è±¡ç›¸äº’ç»§æ‰¿ç‰¹æ€§çš„ä¸€ç§æœºåˆ¶ã€‚1æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç§°ä¸ºåŸå‹çš„å†…ç½®å±æ€§ã€‚åŸå‹æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥åŸå‹ä¼šæœ‰è‡ªå·±çš„åŸå‹ï¼Œè¿™å°±å½¢æˆäº†åŸå‹é“¾ã€‚åŸå‹é“¾çš„ç»ˆç‚¹æ˜¯ nullã€‚\nè®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœåœ¨å¯¹è±¡æœ¬èº«ä¸­æ‰¾ä¸åˆ°è¯¥å±æ€§ï¼Œå°±ä¼šåœ¨åŸå‹ä¸­æœç´¢è¯¥å±æ€§ã€‚å¦‚æœä»ç„¶æ‰¾ä¸åˆ°è¯¥å±æ€§ï¼Œé‚£ä¹ˆå°±æœç´¢åŸå‹çš„åŸå‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´è¾¾æ‰¾åˆ°è¯¥å±æ€§ï¼Œæˆ–è€…æ‰¾åˆ°è¾¾é“¾çš„æœ«ç«¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å› undefinedã€‚\né—­åŒ…ï¼ˆClosureï¼‰ é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡ï¼ˆé™¤äº† this å’Œ argumentsï¼‰çš„å‡½æ•°2ã€‚å…¶åŸç†æ˜¯å‡½æ•°åœ¨è¯æ³•è§£æé˜¶æ®µæŒ‰è¯æ³•ä½œç”¨åŸŸåˆ›å»ºä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰ã€‚ä½œç”¨åŸŸé“¾çš„ç¬¬ä¸€çº§æ˜¯å½“å‰ä»£ç æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒï¼Œæœ€åä¸€çº§æ˜¯å…¨å±€æ‰§è¡Œç¯å¢ƒã€‚å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå˜é‡æ ‡è¯†ç¬¦çš„è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦ï¼Œç›´åˆ°æ‰¾åˆ°æ ‡è¯†ç¬¦ä¸ºæ­¢ï¼ˆå¦‚æœæ‰¾ä¸åˆ°ï¼Œé€šå¸¸ä¼šæŠ¥é”™ï¼‰ã€‚\nç”±äº JavaScript æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œåªè¦å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œé—­åŒ…æ˜¯æ¨¡å—åŒ–å¼€å‘çš„åŸºç¡€ã€‚ä½¿ç”¨é—­åŒ…è¦æ³¨æ„å¾ªç¯å¼•ç”¨å¸¦æ¥çš„å†…å­˜æ³„éœ²é—®é¢˜ã€‚\näº‹ä»¶å¾ªç¯ï¼ˆevent loop ï¼‰ äº‹ä»¶å¾ªç¯ event loop æè¿°çš„æ˜¯ JavaScript å®¿ä¸»ç¯å¢ƒçš„è¿è¡Œæ—¶æ¨¡å‹ã€‚å®ƒè´Ÿè´£åè°ƒç”¨æˆ·äº¤äº’ã€è„šæœ¬æ‰§è¡Œã€UI æ¸²æŸ“ã€ç½‘ç»œè¯·æ±‚ç­‰äº‹ä»¶ã€‚è¿è¡Œæœºåˆ¶å¦‚ä¸‹ï¼š\næ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆExecution Context Stackï¼‰ ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœä¼šåœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ å¯¹åº”äº‹ä»¶ æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå°†ä»»åŠ¡é˜Ÿåˆ—çš„äº‹ä»¶è¯»å–åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œ ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä»¥ä¸Šæ­¥éª¤ å¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºä¸¤ç§ï¼Œå¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰å’Œå®ä»»åŠ¡ï¼ˆMacroTaskï¼‰ï¼Œå¾®ä»»åŠ¡çš„ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡ã€‚\nå®¿ä¸»å‘èµ·çš„ä»»åŠ¡ç§°ä¸ºå®è§‚ä»»åŠ¡ï¼ŒæŠŠ JavaScript å¼•æ“å‘èµ·çš„ä»»åŠ¡ç§°ä¸ºå¾®è§‚ä»»åŠ¡ã€‚\nCSSï¼ˆCascading Style Sheetsï¼‰ ç›’å­æ¨¡å‹ï¼ˆbox modelï¼‰ CSS ç›’å­æ¨¡å‹æè¿°çš„æ˜¯æµè§ˆå™¨å¸ƒå±€æ—¶ï¼Œä¸ºå…ƒç´ ç”Ÿæˆçš„çŸ©å½¢æ¡†ï¼ˆboxï¼‰ï¼Œå®ƒç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š\ncontentï¼Œå†…å®¹ paddingï¼Œå†…è¾¹è· borderï¼Œè¾¹æ¡† marginï¼Œå¤–è¾¹è· 3\né€šå¸¸éœ€è¦å…³æ³¨çš„æ˜¯ï¼Œå…ƒç´ çš„å®½é«˜è®¡ç®—è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡ box-sizing å±æ€§å®šä¹‰ï¼š\ncontent-box ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå…ƒç´ çš„ width/height ä¸åŒ…å« paddingï¼Œborder border-boxï¼šå…ƒç´ çš„ width/height åŒ…å« paddingï¼Œborder å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼ˆBlock formatting contextï¼‰ æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œ æ˜¯ CSS ä¸­æ’ç‰ˆçš„æ¦‚å¿µï¼Œä¸åŒçš„æ ¼å¼æœ‰ä¸åŒçš„å¸ƒå±€è§„åˆ™ã€‚BFCæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å¸ƒå±€ç¯å¢ƒï¼Œé‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å¸ƒå±€ã€‚é€šå¸¸ç”¨æ¥è§£å†³ï¼š\nfloat è„±ç¦»æ–‡æ¡£æµé«˜åº¦å¡Œé™· margin å¡Œé™·ï¼šçˆ¶å­å…ƒç´ å‚ç›´æ–¹å‘çš„ margin å–æœ€å¤§å€¼ margin åˆå¹¶ï¼šå¹¶åˆ—çš„å…„å¼Ÿå…ƒç´ å‚ç›´æ–¹å‘çš„ margin å–æœ€å¤§å€¼ã€‚ em/px/rem/vh/vw pxï¼Œè¡¨ç¤ºåƒç´ ç»å¯¹é•¿åº¦å•ä½\nemï¼Œç›¸å¯¹å­—ä½“å¤§å°çš„é•¿åº¦å•ä½ï¼Œ\nremï¼Œç›¸å¯¹æ ¹å…ƒç´  html çš„å­—ä½“å¤§å°çš„é•¿åº¦å•ä½ï¼Œè‡ªé€‚åº”å¸ƒå±€æ–¹æ¡ˆä¹‹ä¸€\nvw/vhï¼Œæ ¹æ®çª—å£çš„é«˜åº¦/å®½åº¦ï¼Œåˆ†æˆ 100 ç­‰ä»½ï¼Œä¹Ÿæ˜¯è‡ªé€‚åº”å¸ƒå±€æ–¹æ¡ˆä¹‹ä¸€\n%ï¼Œç›¸å¯¹çˆ¶å…ƒç´ çš„å°ºå¯¸\nè‡ªé€‚åº”æ–¹æ¡ˆï¼šå®¹å™¨ä½¿ç”¨ vwï¼Œå­—ä½“å†…å®¹ç»§ç»­ä½¿ç”¨ pxã€‚\n1 2 3 @function vw($px) { @return ($px / 750) * 100vw; } dprï¼ˆdevicePixelRatioï¼‰ æ˜¯ css åƒç´ ä¸ç‰©ç†åƒç´ ï¼ˆdevicePixelï¼‰çš„æ¯”ç‡ã€‚1 å€çš„ä½å›¾åœ¨ dpr ä¸º 2 çš„è®¾å¤‡ä¸Šä¼šæ˜¾ç¤ºæ¨¡ç³Šï¼Œå°±æ˜¯å› ä¸ºå¤šå‡ºäº†ä¸€äº›ç‰©ç†åƒç´ éœ€è¦æ¸²æŸ“ ï¼Œè§¦å‘å›¾åƒç¼©æ”¾ç®—æ³•å¯¼è‡´å›¾ç‰‡æ¨¡ç³Šã€‚è¿˜æœ‰é«˜æ¸…å±ç»˜åˆ¶ canvasï¼Œéœ€è¦ç”¨ dpr æ ¡æ­£åˆ†è¾¨ç‡ã€‚\næ¨èé˜…è¯»ï¼š\né‡æ–°èªè­˜ Pixelã€DPI / PPI ä»¥åŠåƒç´ å¯†åº¦\nTowards A Retina Web\nDOM äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è· äº‹ä»¶æµæè¿°çš„æ˜¯é¡µé¢å…ƒç´ æ¥æ”¶æ—¶é—´çš„é¡ºåºã€‚äº‹ä»¶å†’æ³¡ï¼ˆevent bubblingï¼‰æ˜¯äº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­ã€‚äº‹ä»¶æ•è·ï¼ˆevent capturingï¼‰æ˜¯äº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å¤–å±‚å…ƒç´ æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸‹åˆ°æœ€å…·ä½“çš„å…ƒç´ ã€‚\nDOM äº‹ä»¶æµè§„å®šçš„äº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·é˜¶æ®µã€å¤„äºç›®æ ‡é˜¶æ®µå’Œäº‹ä»¶å†’æ³¡é˜¶æ®µã€‚\nåˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶å¯ä»¥å®ç°äº‹ä»¶å§”æ‰˜æ¥æå‡æ€§èƒ½ï¼Œæœ‰å¤§é‡å­å…ƒç´ è¦ç»‘å®šç›¸åŒäº‹ä»¶æ—¶ï¼Œå¯ä»¥è®²å°†äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼Œå¹¶è®©å­å…ƒç´ ä¸Šå‘ç”Ÿçš„äº‹ä»¶å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚\nhttps://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡-ç¬¬ 3 ç‰ˆã€‹P178\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://www.w3.org/TR/CSS2/box.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":12,"section":"posts","tags":null,"title":"å‰ç«¯é¢è¯•çŸ¥è¯†ç‚¹","uri":"https://sssylvan.github.io/posts/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/"},{"content":"why webpack å°ç¨‹åºå¼€å‘å·¥å…·ï¼ˆå®˜æ–¹æ–‡æ¡£ï¼‰å¯¹ npmã€typescript ç‹¬ç‰¹çš„æ”¯æŒæ–¹å¼æ“æ¯”è¾ƒç¹çã€‚å®ƒçš„ä½œç”¨åº”è¯¥æ›´ç±»ä¼¼äºæµè§ˆå™¨ï¼Œè¿è¡Œç¼–è¯‘ç»“æœã€‚ ä½¿ç”¨ webpack ä¿è¯æ‰“åŒ…ä½“éªŒå’Œ web ä¸€è‡´ã€‚å¦‚ï¼šç¼–è¯‘é”™è¯¯ä¿¡æ¯çš„æ˜¾ç¤º æ‰“åŒ…å†…å®¹ ts -\u0026gt; commonJS æ¨¡å—åŒ– scss -\u0026gt; wxss wxml -\u0026gt; wxml json -\u0026gt; json images -\u0026gt; images on server entry é…ç½® web é€šå¸¸æœ‰ index.js ä½œä¸ºå…¥å£ã€‚å¾®ä¿¡å°ç¨‹åºçš„æœ‰ app.jsï¼Œä½†å®ƒæ²¡æœ‰å…³è”ä»»ä½•é¡µé¢ä»£ç æ–‡ä»¶ï¼Œä¸èƒ½ç®—ä½œå…¥å£ã€‚\né¡µé¢çš„ js ä»£ç ä¹‹é—´æ²¡æœ‰ç›¸äº’å…³è”ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ³¨å†Œåœ¨ app.jsonï¼Œç»„ä»¶ä¹Ÿæ˜¯é€šè¿‡ json é…ç½® usingComponents å…³è”ã€‚åŒæ—¶ jsã€wxmlã€wxss ä¹‹é—´ä¹Ÿæ²¡æœ‰å…³è”å…³ç³»ï¼Œé ç›¸åŒçš„è·¯å¾„ä¸æ–‡ä»¶åçº¦å®šã€‚å› æ­¤å°† app.json é…ç½®ä¸º entryã€‚\nèµ„æºåŠ è½½æ–¹æ¡ˆï¼š\nts èµ„æºé€šè¿‡ entry-plugin.ts è·å– app.json æ‰€æœ‰çš„é¡µé¢å’Œç»„ä»¶çš„ ts æ–‡ä»¶æ·»åŠ ä¸º entry wxmlã€scss ä»¥åŠå›¾ç‰‡ç­‰å…¶ä»–èµ„æºåˆ™é€šè¿‡ json.loader.js loadModule åŠ è½½ åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œä¼šç»™æ¯ä¸ª entry éƒ½æ·»åŠ ä¸Š runtime ä»£ç ã€‚ä½†å°ç¨‹åºè¿è¡Œæ—¶æ˜¯å•é¡µåº”ç”¨ï¼Œåªéœ€è¦ä¸€ä»½ runtime ä»£ç å³å¯ã€‚runtimeChunk éœ€è¦é…ç½®ä¸º single\nrequire è¡¥ä¸ï¼š\nå°ç¨‹åºä¸å…è®¸ require ä¸€ä¸ªå˜é‡ï¼Œä»¥ä¸‹ä»£ç ä¾èµ–è¿è¡Œæ—¶ï¼Œæ— æ³•è§£æå‡ºå…·ä½“ä¾èµ–ï¼š\n1 2 let m = \u0026#39;testa\u0026#39; require(m) å¯¼è‡´ webpack ç”Ÿæˆçš„ js åœ¨è¿è¡Œæ—¶å¼•å…¥æ¨¡å—æŠ¥é”™ï¼šError: module 'xxxx.js' is not definedã€‚ä»£ç ç‰‡æ®µï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // app.js var __webpack_exports__ = __webpack_require__.X( 0, [ \u0026#39;commons-api\u0026#39;, \u0026#39;commons-a\u0026#39;, \u0026#39;commons-e\u0026#39;, \u0026#39;commons-node_modules_j\u0026#39;, \u0026#39;commons-utils_c\u0026#39;, \u0026#39;commons-utils_validators_f\u0026#39;, ], () =\u0026gt; __webpack_exec__(\u0026#39;./app.ts\u0026#39;) ) // runtime.js:130 /******/ installChunk(require(\u0026#39;./\u0026#39; + __webpack_require__.u(chunkId))) è§£å†³æ–¹æ¡ˆï¼šåœ¨ runtime.js ä¸­æ·»åŠ å…¬å…±ä»£ç çš„ require è¯¦è§ï¼šrequire-patch-plugin.tsï¼ˆæ³¨æ„ï¼šä¿®æ”¹ cacheGroups å¯èƒ½ä¼šå½±å“è¯¥æ’ä»¶ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // runtime.js:3 // æ·»åŠ å‰ var __webpack_modules__ = {} // æ·»åŠ å var __webpack_modules__ = Object.assign( require(\u0026#39;./commons-utils_validators_f.js\u0026#39;).modules, require(\u0026#39;./commons-api.js\u0026#39;).modules, require(\u0026#39;./commons-a.js\u0026#39;).modules, require(\u0026#39;./commons-e.js\u0026#39;).modules, require(\u0026#39;./commons-node_modules_j.js\u0026#39;).modules, require(\u0026#39;./commons-utils_c.js\u0026#39;).modules ) å›¾ç‰‡å¤„ç† ç”±äºå°ç¨‹åºåŒ…çš„å¤§å°é™åˆ¶ï¼Œwxss ä¸­ä¹Ÿä¸èƒ½åŒ…å«æœ¬åœ°å›¾ç‰‡ã€‚å›¾ç‰‡èµ„æºéœ€è¦ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¼€å‘å’Œç”Ÿäº§æ¨¡å¼ä¸‹éƒ½éœ€è¦ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\næœåŠ¡å™¨ä¸Šå›¾ç‰‡èµ„æºä¸åŒçš„ç¯å¢ƒçš„åŒºåˆ†ï¼ŒOSS å¯¹åº”çš„ç›®å½•å¦‚ä¸‹ï¼š dev: weapp-dev stagingã€test: weapp-ts prod: weapp production ç”Ÿäº§æ¨¡å¼ï¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œå°† dist/static/images ç›®å½•ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œä¸Šä¼ ç»“æŸåç§»é™¤ã€‚è¯¦è§ï¼šupload-images.ts development å¼€å‘æ¨¡å¼ï¼šæ‰‹åŠ¨ä¸Šä¼  npm run manual-upload-imagesã€‚å¦‚æœæœ‰å˜åŠ¨çš„å›¾ç‰‡è¾ƒå¤šï¼Œè°ƒæ•´æ’ä»¶å‚æ•°å®ç°è‡ªåŠ¨ä¸Šä¼  ","description":"","id":13,"section":"posts","tags":null,"title":"å°ç¨‹åº webpack æ‰“åŒ…æ–¹æ¡ˆ","uri":"https://sssylvan.github.io/posts/%E5%B0%8F%E7%A8%8B%E5%BA%8F-webpack-%E6%89%93%E5%8C%85%E6%96%B9%E6%A1%88/"},{"content":"ä¸€ç›´æ²¡æ‰¾åˆ°è£…é¥°å™¨ï¼ˆDecoratorï¼‰åˆé€‚çš„ä¸šåŠ¡åº”ç”¨åœºæ™¯ã€‚ä»Šå¤©æ°å·§åœ¨å¤„ç†èŠ‚æµæ—¶çµæœºä¸€åŠ¨ï¼Œè¿™ç”¨è£…é¥°å™¨æ¥å®ç°å¾ˆæ£’æ£’å•Šã€‚\nè£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚\nè£…é¥°å™¨å¯¹å¤–è¡¨ç°æ˜¯èƒ½åŠ›+1 æˆ–åŠ å¼º ğŸ’ªï¼Œå†…éƒ¨å®ç°å°±æ˜¯å¥—å¨ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºè£…é¥°å™¨æ‰©å±•å‡½æ•°çš„å¥—è·¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // åŸå§‹å‡½æ•° function greet(name) { console.log(`Hello, ${name}!`) } // è£…é¥°å™¨å‡½æ•° function withExclamation(func) { return function (name) { func(name + \u0026#39;!\u0026#39;) } } // ä½¿ç”¨è£…é¥°å™¨å‡½æ•°æ¥æ‰©å±•åŸå§‹å‡½æ•° const decoratedGreet = withExclamation(greet) // è¾“å‡ºç»“æœï¼šHello, World! decoratedGreet(\u0026#39;World\u0026#39;) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒwithExclamation å‡½æ•°æ˜¯â€œè£…é¥°å™¨â€å‡½æ•°ï¼Œå®ƒæ¥å— greet å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶å¥—ä½ greet è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚è°ƒç”¨ greet ä¹‹å‰å‘ name å‚æ•°æ·»åŠ äº†ä¸€ä¸ªæ„Ÿå¹å·ã€‚\nå¥—è·¯å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œä¸‹é¢çœ‹ä¸‹èŠ‚æµå’Œé˜²æŠ–çš„å…·ä½“å®ç°ã€‚\nèŠ‚æµè£…é¥°å™¨å‡½æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const throttle = (wait) =\u0026gt; { let prev = Date.now() return (target, name, descriptor) =\u0026gt; { const func = descriptor.value if (typeof func === \u0026#39;function\u0026#39;) { descriptor.value = function (...args) { const now = Date.now() if (now - prev \u0026gt; wait) { func.apply(this, args) prev = Date.now() } } } } } é˜²æŠ–è£…é¥°å™¨å‡½æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 const debounce = (wait) =\u0026gt; { let timer return (target, name, descriptor) =\u0026gt; { const func = descriptor.value if (typeof func === \u0026#39;function\u0026#39;) { descriptor.value = function (...args) { if (timer) clearTimeout(timer) timer = setTimeout(() =\u0026gt; { func.apply(this, args) }, wait) } } } } è°ƒç”¨æ–¹å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 export class App { @throttle(500) handleClick() { console.log(\u0026#39;click\u0026#39;) } @debounce(500) handleInput(ev) { console.log(ev.target.value) } } ä¸å½±å“åŸæœ‰ä¸šåŠ¡ï¼Œåˆä¼˜åŒ–äº†æ€§èƒ½ï¼Œç¾æ»‹æ»‹ ğŸŒ¸ã€‚\nè£…é¥°å™¨é€šå¸¸æäº›ä¸ä¸šåŠ¡ç›´æ¥å…³è”ä¸å¤§çš„äº‹ï¼Œå¯ä»¥çœ‹çœ‹ç¬¬ä¸‰æ–¹åº“æä¾›çš„è£…é¥°å™¨ï¼Œæ‰¾æ‰¾æœ‰æ²¡æœ‰èƒ½ç”¨åˆ°çš„ï¼š\nhttps://www.npmjs.com/package/lodash-decorators https://www.npmjs.com/package/core-decorators ","description":"","id":14,"section":"posts","tags":null,"title":"è£…é¥°å™¨å®ç°èŠ‚æµã€é˜²æŠ–","uri":"https://sssylvan.github.io/posts/%E8%A3%85%E9%A5%B0%E5%99%A8%E5%AE%9E%E7%8E%B0%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"}]